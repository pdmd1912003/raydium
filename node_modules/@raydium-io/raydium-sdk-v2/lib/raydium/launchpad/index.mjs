var ei=Object.defineProperty,ti=Object.defineProperties;var ni=Object.getOwnPropertyDescriptors;var Jt=Object.getOwnPropertySymbols;var ii=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable;var $t=(t,e,n)=>e in t?ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_=(t,e)=>{for(var n in e||(e={}))ii.call(e,n)&&$t(t,n,e[n]);if(Jt)for(var n of Jt(e))ri.call(e,n)&&$t(t,n,e[n]);return t},G=(t,e)=>ti(t,ni(e));import{SystemProgram as oe,TransactionInstruction as ne}from"@solana/web3.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as dt,TOKEN_2022_PROGRAM_ID as Po,TOKEN_PROGRAM_ID as Qt}from"@solana/spl-token";import He from"bn.js";import{PublicKey as bi}from"@solana/web3.js";import sn,{isBN as an}from"bn.js";import{bits as Wo,BitStructure as Vo,blob as oi,Blob as _o,cstr as qo,f32 as Go,f32be as Uo,f64 as Xo,f64be as zo,greedy as Ho,Layout as si,ns64 as Zo,ns64be as Yo,nu64 as jo,nu64be as Qo,offset as ai,s16 as Jo,s16be as $o,s24 as es,s24be as ts,s32 as ui,s32be as ns,s40 as is,s40be as rs,s48 as os,s48be as ss,s8 as as,seq as ci,struct as us,Structure as li,u16 as mi,u16be as cs,u24 as ls,u24be as ms,u32 as di,u32be as ds,u40 as ps,u40be as fs,u48 as bs,u48be as ys,u8 as pi,UInt as fi,union as gs,Union as Ps,unionLayoutDiscriminator as As,utf8 as ws}from"@solana/buffer-layout";var At=si,en=li;var wt=fi;var tn=pi,ye=mi;var nn=di;var ge=ui;var rn=ci;var Q=oi;var on=ai;var Ne=class extends At{constructor(n,i,r){super(n,r);this.blob=Q(n),this.signed=i}decode(n,i=0){let r=new sn(this.blob.decode(n,i),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(n,i,r=0){return typeof n=="number"&&(n=new sn(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),i,r)}};function I(t){return new wt(1,t)}function Re(t){return new wt(4,t)}function p(t){return new Ne(8,!1,t)}function W(t){return new Ne(16,!1,t)}function un(t){return new Ne(8,!0,t)}function cn(t){return new Ne(16,!0,t)}var Le=class extends At{constructor(n,i,r,o){super(n.span,o);this.layout=n,this.decoder=i,this.encoder=r}decode(n,i){return this.decoder(this.layout.decode(n,i))}encode(n,i,r){return this.layout.encode(this.encoder(n),i,r)}getSpan(n,i){return this.layout.getSpan(n,i)}};function h(t){return new Le(Q(32),e=>new bi(e),e=>e.toBuffer(),t)}function kt(t){return new Le(tn(),yi,gi,t)}function yi(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}function gi(t){return t?1:0}function Pi(t){let e=nn("length"),n=S([e,Q(on(e,-e.span),"data")]);return new Le(n,({data:i})=>i,i=>({data:i}),t)}function J(t){return new Le(Pi(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}var Tt=class extends en{decode(e,n){return super.decode(e,n)}};function S(t,e,n){return new Tt(t,e,n)}function v(t,e,n){let i,r=typeof e=="number"?e:an(e)?e.toNumber():new Proxy(e,{get(o,s){if(!i){let a=Reflect.get(o,"count");i=an(a)?a.toNumber():a,Reflect.set(o,"count",i)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(i=a),Reflect.set(o,s,a)}});return rn(t,r,n)}import{PublicKey as Os}from"@solana/web3.js";import{get as ln,set as Ai}from"lodash";var ht=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},mn={},wi={};function j(t){let e=ln(mn,t);if(!e){let n=ln(wi,t);e=new ht({name:t,logLevel:n}),Ai(mn,t,e)}return e}import{MINT_SIZE as _s,TOKEN_PROGRAM_ID as qs,getTransferFeeConfig as Gs,unpackMint as Us}from"@solana/spl-token";var Xs=j("Raydium_accountInfo_util");import pe from"bn.js";var Fe=9e15,he=1e9,Bt="0123456789abcdef",et="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",tt="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",xt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fe,maxE:Fe,crypto:!1},yn,Pe,C=!0,it="[DecimalError] ",ke=it+"Invalid argument: ",gn=it+"Precision limit exceeded",Pn=it+"crypto unavailable",An="[object Decimal]",Z=Math.floor,U=Math.pow,Ti=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ki=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,hi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,le=1e7,B=7,Bi=9007199254740991,xi=et.length-1,It=tt.length-1,f={toStringTag:An};f.absoluteValue=f.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),w(t)};f.ceil=function(){return w(new this.constructor(this),this.e+1,2)};f.clampedTo=f.clamp=function(t,e){var n,i=this,r=i.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(ke+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new r(i)};f.comparedTo=f.cmp=function(t){var e,n,i,r,o=this,s=o.d,a=(t=new o.constructor(t)).d,c=o.s,u=t.s;if(!s||!a)return!c||!u?NaN:c!==u?c:s===a?0:!s^c<0?1:-1;if(!s[0]||!a[0])return s[0]?c:a[0]?-u:0;if(c!==u)return c;if(o.e!==t.e)return o.e>t.e^c<0?1:-1;for(i=s.length,r=a.length,e=0,n=i<r?i:r;e<n;++e)if(s[e]!==a[e])return s[e]>a[e]^c<0?1:-1;return i===r?0:i>r^c<0?1:-1};f.cosine=f.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+B,i.rounding=1,n=Ii(i,xn(i,n)),i.precision=t,i.rounding=e,w(Pe==2||Pe==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};f.cubeRoot=f.cbrt=function(){var t,e,n,i,r,o,s,a,c,u,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(C=!1,o=l.s*U(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=z(l.d),t=l.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=U(n,1/3),t=Z((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new m(n),i.s=l.s):i=new m(o.toString()),s=(t=m.precision)+3;;)if(a=i,c=a.times(a).times(a),u=c.plus(l),i=E(u.plus(l).times(a),u.plus(c),s+2,1),z(a.d).slice(0,s)===(n=z(i.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(w(a,t+1,0),a.times(a).times(a).eq(l))){i=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(w(i,t+1,1),e=!i.times(i).times(i).eq(l));break}return C=!0,w(i,t,m.rounding,e)};f.decimalPlaces=f.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Z(this.e/B))*B,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};f.dividedBy=f.div=function(t){return E(this,new this.constructor(t))};f.dividedToIntegerBy=f.divToInt=function(t){var e=this,n=e.constructor;return w(E(e,new n(t),0,1,1),n.precision,n.rounding)};f.equals=f.eq=function(t){return this.cmp(t)===0};f.floor=function(){return w(new this.constructor(this),this.e+1,3)};f.greaterThan=f.gt=function(t){return this.cmp(t)>0};f.greaterThanOrEqualTo=f.gte=function(t){var e=this.cmp(t);return e==1||e===0};f.hyperbolicCosine=f.cosh=function(){var t,e,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(t=Math.ceil(r/3),e=(1/ot(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=Me(s,1,o.times(e),new s(1),!0);for(var c,u=t,l=new s(8);u--;)c=o.times(o),o=a.minus(c.times(l.minus(c.times(l))));return w(o,s.precision=n,s.rounding=i,!0)};f.hyperbolicSine=f.sinh=function(){var t,e,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(r.e,r.sd())+4,o.rounding=1,i=r.d.length,i<3)r=Me(o,2,r,r,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,r=r.times(1/ot(5,t)),r=Me(o,2,r,r,!0);for(var s,a=new o(5),c=new o(16),u=new o(20);t--;)s=r.times(r),r=r.times(a.plus(s.times(c.times(s).plus(u))))}return o.precision=e,o.rounding=n,w(r,e,n,!0)};f.hyperbolicTangent=f.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,E(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};f.inverseCosine=f.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),r=n.precision,o=n.rounding;return i!==-1?i===0?e.isNeg()?ce(n,r,o):new n(0):new n(NaN):e.isZero()?ce(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,e=e.asin(),t=ce(n,r+4,o).times(.5),n.precision=r,n.rounding=o,t.minus(e))};f.inverseHyperbolicCosine=f.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,C=!1,n=n.times(n).minus(1).sqrt().plus(n),C=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};f.inverseHyperbolicSine=f.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,C=!1,n=n.times(n).plus(1).sqrt().plus(n),C=!0,i.precision=t,i.rounding=e,n.ln())};f.inverseHyperbolicTangent=f.atanh=function(){var t,e,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(t=o.precision,e=o.rounding,i=r.sd(),Math.max(i,t)<2*-r.e-1?w(new o(r),t,e,!0):(o.precision=n=i-r.e,r=E(r.plus(1),new o(1).minus(r),n+t,1),o.precision=t+4,o.rounding=1,r=r.ln(),o.precision=t,o.rounding=e,r.times(.5))):new o(NaN)};f.inverseSine=f.asin=function(){var t,e,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(e=r.abs().cmp(1),n=o.precision,i=o.rounding,e!==-1?e===0?(t=ce(o,n+4,i).times(.5),t.s=r.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))};f.inverseTangent=f.atan=function(){var t,e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding;if(u.isFinite()){if(u.isZero())return new l(u);if(u.abs().eq(1)&&m+4<=It)return s=ce(l,m+4,d).times(.25),s.s=u.s,s}else{if(!u.s)return new l(NaN);if(m+4<=It)return s=ce(l,m+4,d).times(.5),s.s=u.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/B+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(C=!1,e=Math.ceil(a/B),i=1,c=u.times(u),s=new l(u),r=u;t!==-1;)if(r=r.times(c),o=s.minus(r.div(i+=2)),r=r.times(c),s=o.plus(r.div(i+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===o.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),C=!0,w(s,l.precision=m,l.rounding=d,!0)};f.isFinite=function(){return!!this.d};f.isInteger=f.isInt=function(){return!!this.d&&Z(this.e/B)>this.d.length-2};f.isNaN=function(){return!this.s};f.isNegative=f.isNeg=function(){return this.s<0};f.isPositive=f.isPos=function(){return this.s>0};f.isZero=function(){return!!this.d&&this.d[0]===0};f.lessThan=f.lt=function(t){return this.cmp(t)<0};f.lessThanOrEqualTo=f.lte=function(t){return this.cmp(t)<1};f.logarithm=f.log=function(t){var e,n,i,r,o,s,a,c,u=this,l=u.constructor,m=l.precision,d=l.rounding,b=5;if(t==null)t=new l(10),e=!0;else{if(t=new l(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new l(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(r=n[0];r%10===0;)r/=10;o=r!==1}if(C=!1,a=m+b,s=Te(u,a),i=e?nt(l,a+10):Te(t,a),c=E(s,i,a,1),Oe(c.d,r=m,d))do if(a+=10,s=Te(u,a),i=e?nt(l,a+10):Te(t,a),c=E(s,i,a,1),!o){+z(c.d).slice(r+1,r+15)+1==1e14&&(c=w(c,m+1,0));break}while(Oe(c.d,r+=10,d));return C=!0,w(c,m,d)};f.minus=f.sub=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,b=this,g=b.constructor;if(t=new g(t),!b.d||!t.d)return!b.s||!t.s?t=new g(NaN):b.d?t.s=-t.s:t=new g(t.d||b.s!==t.s?b:NaN),t;if(b.s!=t.s)return t.s=-t.s,b.plus(t);if(u=b.d,d=t.d,a=g.precision,c=g.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else if(u[0])t=new g(b);else return new g(c===3?-0:0);return C?w(t,a,c):t}if(n=Z(t.e/B),l=Z(b.e/B),u=u.slice(),o=l-n,o){for(m=o<0,m?(e=u,o=-o,s=d.length):(e=d,n=l,s=u.length),i=Math.max(Math.ceil(a/B),s)+2,o>i&&(o=i,e.length=1),e.reverse(),i=o;i--;)e.push(0);e.reverse()}else{for(i=u.length,s=d.length,m=i<s,m&&(s=i),i=0;i<s;i++)if(u[i]!=d[i]){m=u[i]<d[i];break}o=0}for(m&&(e=u,u=d,d=e,t.s=-t.s),s=u.length,i=d.length-s;i>0;--i)u[s++]=0;for(i=d.length;i>o;){if(u[--i]<d[i]){for(r=i;r&&u[--r]===0;)u[r]=le-1;--u[r],u[i]+=le}u[i]-=d[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=rt(u,n),C?w(t,a,c):t):new g(c===3?-0:0)};f.modulo=f.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?w(new i(n),i.precision,i.rounding):(C=!1,i.modulo==9?(e=E(n,t.abs(),0,3,1),e.s*=t.s):e=E(n,t,0,i.modulo,1),e=e.times(t),C=!0,n.minus(e))};f.naturalExponential=f.exp=function(){return St(this)};f.naturalLogarithm=f.ln=function(){return Te(this)};f.negated=f.neg=function(){var t=new this.constructor(this);return t.s=-t.s,w(t)};f.plus=f.add=function(t){var e,n,i,r,o,s,a,c,u,l,m=this,d=m.constructor;if(t=new d(t),!m.d||!t.d)return!m.s||!t.s?t=new d(NaN):m.d||(t=new d(t.d||m.s===t.s?m:NaN)),t;if(m.s!=t.s)return t.s=-t.s,m.minus(t);if(u=m.d,l=t.d,a=d.precision,c=d.rounding,!u[0]||!l[0])return l[0]||(t=new d(m)),C?w(t,a,c):t;if(o=Z(m.e/B),i=Z(t.e/B),u=u.slice(),r=o-i,r){for(r<0?(n=u,r=-r,s=l.length):(n=l,i=o,s=u.length),o=Math.ceil(a/B),s=o>s?o+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=u.length,r=l.length,s-r<0&&(r=s,n=l,l=u,u=n),e=0;r;)e=(u[--r]=u[r]+l[r]+e)/le|0,u[r]%=le;for(e&&(u.unshift(e),++i),s=u.length;u[--s]==0;)u.pop();return t.d=u,t.e=rt(u,i),C?w(t,a,c):t};f.precision=f.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ke+t);return n.d?(e=Tn(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};f.round=function(){var t=this,e=t.constructor;return w(new e(t),t.e+1,e.rounding)};f.sine=f.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+B,i.rounding=1,n=Ci(i,xn(i,n)),i.precision=t,i.rounding=e,w(Pe>2?n.neg():n,t,e,!0)):new i(NaN)};f.squareRoot=f.sqrt=function(){var t,e,n,i,r,o,s=this,a=s.d,c=s.e,u=s.s,l=s.constructor;if(u!==1||!a||!a[0])return new l(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);for(C=!1,u=Math.sqrt(+s),u==0||u==1/0?(e=z(a),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=Z((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),i=new l(e)):i=new l(u.toString()),n=(c=l.precision)+3;;)if(o=i,i=o.plus(E(s,o,n+2,1)).times(.5),z(o.d).slice(0,n)===(e=z(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!r&&e=="4999"){if(!r&&(w(o,c+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(w(i,c+1,1),t=!i.times(i).eq(s));break}return C=!0,w(i,c,l.rounding,t)};f.tangent=f.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=E(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,w(Pe==2||Pe==4?n.neg():n,t,e,!0)):new i(NaN)};f.times=f.mul=function(t){var e,n,i,r,o,s,a,c,u,l=this,m=l.constructor,d=l.d,b=(t=new m(t)).d;if(t.s*=l.s,!d||!d[0]||!b||!b[0])return new m(!t.s||d&&!d[0]&&!b||b&&!b[0]&&!d?NaN:!d||!b?t.s/0:t.s*0);for(n=Z(l.e/B)+Z(t.e/B),c=d.length,u=b.length,c<u&&(o=d,d=b,b=o,s=c,c=u,u=s),o=[],s=c+u,i=s;i--;)o.push(0);for(i=u;--i>=0;){for(e=0,r=c+i;r>i;)a=o[r]+b[i]*d[r-i-1]+e,o[r--]=a%le|0,e=a/le|0;o[r]=(o[r]+e)%le|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=rt(o,n),C?w(t,m.precision,m.rounding):t};f.toBinary=function(t,e){return Kt(this,2,t,e)};f.toDecimalPlaces=f.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:($(t,0,he),e===void 0?e=i.rounding:$(e,0,8),w(n,t+n.e+1,e))};f.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=me(i,!0):($(t,0,he),e===void 0?e=r.rounding:$(e,0,8),i=w(new r(i),t+1,e),n=me(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toFixed=function(t,e){var n,i,r=this,o=r.constructor;return t===void 0?n=me(r):($(t,0,he),e===void 0?e=o.rounding:$(e,0,8),i=w(new o(r),t+r.e+1,e),n=me(i,!1,t+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};f.toFraction=function(t){var e,n,i,r,o,s,a,c,u,l,m,d,b=this,g=b.d,y=b.constructor;if(!g)return new y(b);if(u=n=new y(1),i=c=new y(0),e=new y(i),o=e.e=Tn(g)-b.e-1,s=o%B,e.d[0]=U(10,s<0?B+s:s),t==null)t=o>0?e:u;else{if(a=new y(t),!a.isInt()||a.lt(u))throw Error(ke+a);t=a.gt(e)?o>0?e:u:a}for(C=!1,a=new y(z(g)),l=y.precision,y.precision=o=g.length*B*2;m=E(a,e,0,1,1),r=n.plus(m.times(i)),r.cmp(t)!=1;)n=i,i=r,r=u,u=c.plus(m.times(r)),c=r,r=e,e=a.minus(m.times(r)),a=r;return r=E(t.minus(n),i,0,1,1),c=c.plus(r.times(u)),n=n.plus(r.times(i)),c.s=u.s=b.s,d=E(u,i,o,1).minus(b).abs().cmp(E(c,n,o,1).minus(b).abs())<1?[u,i]:[c,n],y.precision=l,C=!0,d};f.toHexadecimal=f.toHex=function(t,e){return Kt(this,16,t,e)};f.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:$(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(C=!1,n=E(n,t,0,e,1).times(t),C=!0,w(n)):(t.s=n.s,n=t),n};f.toNumber=function(){return+this};f.toOctal=function(t,e){return Kt(this,8,t,e)};f.toPower=f.pow=function(t){var e,n,i,r,o,s,a=this,c=a.constructor,u=+(t=new c(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new c(U(+a,u));if(a=new c(a),a.eq(1))return a;if(i=c.precision,o=c.rounding,t.eq(1))return w(a,i,o);if(e=Z(t.e/B),e>=t.d.length-1&&(n=u<0?-u:u)<=Bi)return r=kn(c,a,n,i),t.s<0?new c(1).div(r):w(r,i,o);if(s=a.s,s<0){if(e<t.d.length-1)return new c(NaN);if((t.d[e]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=U(+a,u),e=n==0||!isFinite(n)?Z(u*(Math.log("0."+z(a.d))/Math.LN10+a.e+1)):new c(n+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?s/0:0):(C=!1,c.rounding=a.s=1,n=Math.min(12,(e+"").length),r=St(t.times(Te(a,i+n)),i),r.d&&(r=w(r,i+5,1),Oe(r.d,i,o)&&(e=i+10,r=w(St(t.times(Te(a,e+n)),e),e+5,1),+z(r.d).slice(i+1,i+15)+1==1e14&&(r=w(r,i+1,0)))),r.s=s,C=!0,c.rounding=o,w(r,i,o))};f.toPrecision=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=me(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):($(t,1,he),e===void 0?e=r.rounding:$(e,0,8),i=w(new r(i),t,e),n=me(i,t<=i.e||i.e<=r.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};f.toSignificantDigits=f.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):($(t,1,he),e===void 0?e=i.rounding:$(e,0,8)),w(new i(n),t,e)};f.toString=function(){var t=this,e=t.constructor,n=me(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};f.truncated=f.trunc=function(){return w(new this.constructor(this),this.e+1,1)};f.valueOf=f.toJSON=function(){var t=this,e=t.constructor,n=me(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function z(t){var e,n,i,r=t.length-1,o="",s=t[0];if(r>0){for(o+=s,e=1;e<r;e++)i=t[e]+"",n=B-i.length,n&&(o+=we(n)),o+=i;s=t[e],i=s+"",n=B-i.length,n&&(o+=we(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function $(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ke+t)}function Oe(t,e,n,i){var r,o,s,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=B,r=0):(r=Math.ceil((e+1)/B),e%=B),o=U(10,B-e),a=t[r]%o|0,i==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(t[r+1]/o/100|0)==U(10,e-2)-1||(a==o/2||a==0)&&(t[r+1]/o/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),s=(i||n<4)&&a==9999||!i&&n>3&&a==4999):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(t[r+1]/o/1e3|0)==U(10,e-3)-1,s}function $e(t,e,n){for(var i,r=[0],o,s=0,a=t.length;s<a;){for(o=r.length;o--;)r[o]*=e;for(r[0]+=Bt.indexOf(t.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function Ii(t,e){var n,i,r;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),r=(1/ot(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),t.precision+=n,e=Me(t,1,e.times(r),new t(1));for(var o=n;o--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var E=function(){function t(i,r,o){var s,a=0,c=i.length;for(i=i.slice();c--;)s=i[c]*r+a,i[c]=s%o|0,a=s/o|0;return a&&i.unshift(a),i}function e(i,r,o,s){var a,c;if(o!=s)c=o>s?1:-1;else for(a=c=0;a<o;a++)if(i[a]!=r[a]){c=i[a]>r[a]?1:-1;break}return c}function n(i,r,o,s){for(var a=0;o--;)i[o]-=a,a=i[o]<r[o]?1:0,i[o]=a*s+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s,a,c){var u,l,m,d,b,g,y,x,K,N,k,L,R,M,ae,Ae,ue,be,q,je,Qe=i.constructor,Pt=i.s==r.s?1:-1,H=i.d,O=r.d;if(!H||!H[0]||!O||!O[0])return new Qe(!i.s||!r.s||(H?O&&H[0]==O[0]:!O)?NaN:H&&H[0]==0||!O?Pt*0:Pt/0);for(c?(b=1,l=i.e-r.e):(c=le,b=B,l=Z(i.e/b)-Z(r.e/b)),q=O.length,ue=H.length,K=new Qe(Pt),N=K.d=[],m=0;O[m]==(H[m]||0);m++);if(O[m]>(H[m]||0)&&l--,o==null?(M=o=Qe.precision,s=Qe.rounding):a?M=o+(i.e-r.e)+1:M=o,M<0)N.push(1),g=!0;else{if(M=M/b+2|0,m=0,q==1){for(d=0,O=O[0],M++;(m<ue||d)&&M--;m++)ae=d*c+(H[m]||0),N[m]=ae/O|0,d=ae%O|0;g=d||m<ue}else{for(d=c/(O[0]+1)|0,d>1&&(O=t(O,d,c),H=t(H,d,c),q=O.length,ue=H.length),Ae=q,k=H.slice(0,q),L=k.length;L<q;)k[L++]=0;je=O.slice(),je.unshift(0),be=O[0],O[1]>=c/2&&++be;do d=0,u=e(O,k,q,L),u<0?(R=k[0],q!=L&&(R=R*c+(k[1]||0)),d=R/be|0,d>1?(d>=c&&(d=c-1),y=t(O,d,c),x=y.length,L=k.length,u=e(y,k,x,L),u==1&&(d--,n(y,q<x?je:O,x,c))):(d==0&&(u=d=1),y=O.slice()),x=y.length,x<L&&y.unshift(0),n(k,y,L,c),u==-1&&(L=k.length,u=e(O,k,q,L),u<1&&(d++,n(k,q<L?je:O,L,c))),L=k.length):u===0&&(d++,k=[0]),N[m++]=d,u&&k[0]?k[L++]=H[Ae]||0:(k=[H[Ae]],L=1);while((Ae++<ue||k[0]!==void 0)&&M--);g=k[0]!==void 0}N[0]||N.shift()}if(b==1)K.e=l,yn=g;else{for(m=1,d=N[0];d>=10;d/=10)m++;K.e=m+l*b-1,w(K,a?o+K.e+1:o,s,g)}return K}}();function w(t,e,n,i){var r,o,s,a,c,u,l,m,d,b=t.constructor;e:if(e!=null){if(m=t.d,!m)return t;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=e-r,o<0)o+=B,s=e,l=m[d=0],c=l/U(10,r-s-1)%10|0;else if(d=Math.ceil((o+1)/B),a=m.length,d>=a)if(i){for(;a++<=d;)m.push(0);l=c=0,r=1,o%=B,s=o-B+1}else break e;else{for(l=a=m[d],r=1;a>=10;a/=10)r++;o%=B,s=o-B+r,c=s<0?0:l/U(10,r-s-1)%10|0}if(i=i||e<0||m[d+1]!==void 0||(s<0?l:l%U(10,r-s-1)),u=n<4?(c||i)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||i||n==6&&(o>0?s>0?l/U(10,r-s):0:m[d-1])%10&1||n==(t.s<0?8:7)),e<1||!m[0])return m.length=0,u?(e-=t.e+1,m[0]=U(10,(B-e%B)%B),t.e=-e||0):m[0]=t.e=0,t;if(o==0?(m.length=d,a=1,d--):(m.length=d+1,a=U(10,B-o),m[d]=s>0?(l/U(10,r-s)%U(10,s)|0)*a:0),u)for(;;)if(d==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(t.e++,m[0]==le&&(m[0]=1));break}else{if(m[d]+=a,m[d]!=le)break;m[d--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return C&&(t.e>b.maxE?(t.d=null,t.e=NaN):t.e<b.minE&&(t.e=0,t.d=[0])),t}function me(t,e,n){if(!t.isFinite())return Bn(t);var i,r=t.e,o=z(t.d),s=o.length;return e?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+we(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):r<0?(o="0."+we(-r-1)+o,n&&(i=n-s)>0&&(o+=we(i))):r>=s?(o+=we(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+we(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=we(i))),o}function rt(t,e){var n=t[0];for(e*=B;n>=10;n/=10)e++;return e}function nt(t,e,n){if(e>xi)throw C=!0,n&&(t.precision=n),Error(gn);return w(new t(et),e,1,!0)}function ce(t,e,n){if(e>It)throw Error(gn);return w(new t(tt),e,n,!0)}function Tn(t){var e=t.length-1,n=e*B+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function we(t){for(var e="";t--;)e+="0";return e}function kn(t,e,n,i){var r,o=new t(1),s=Math.ceil(i/B+4);for(C=!1;;){if(n%2&&(o=o.times(e),fn(o.d,s)&&(r=!0)),n=Z(n/2),n===0){n=o.d.length-1,r&&o.d[n]===0&&++o.d[n];break}e=e.times(e),fn(e.d,s)}return C=!0,o}function pn(t){return t.d[t.d.length-1]&1}function hn(t,e,n){for(var i,r=new t(e[0]),o=0;++o<e.length;)if(i=new t(e[o]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function St(t,e){var n,i,r,o,s,a,c,u=0,l=0,m=0,d=t.constructor,b=d.rounding,g=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(C=!1,c=g):c=e,a=new d(.03125);t.e>-2;)t=t.times(a),m+=5;for(i=Math.log(U(2,m))/Math.LN10*2+5|0,c+=i,n=o=s=new d(1),d.precision=c;;){if(o=w(o.times(t),c,1),n=n.times(++l),a=s.plus(E(o,n,c,1)),z(a.d).slice(0,c)===z(s.d).slice(0,c)){for(r=m;r--;)s=w(s.times(s),c,1);if(e==null)if(u<3&&Oe(s.d,c-i,b,u))d.precision=c+=10,n=o=a=new d(1),l=0,u++;else return w(s,d.precision=g,b,C=!0);else return d.precision=g,s}s=a}}function Te(t,e){var n,i,r,o,s,a,c,u,l,m,d,b=1,g=10,y=t,x=y.d,K=y.constructor,N=K.rounding,k=K.precision;if(y.s<0||!x||!x[0]||!y.e&&x[0]==1&&x.length==1)return new K(x&&!x[0]?-1/0:y.s!=1?NaN:x?0:y);if(e==null?(C=!1,l=k):l=e,K.precision=l+=g,n=z(x),i=n.charAt(0),Math.abs(o=y.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(t),n=z(y.d),i=n.charAt(0),b++;o=y.e,i>1?(y=new K("0."+n),o++):y=new K(i+"."+n.slice(1))}else return u=nt(K,l+2,k).times(o+""),y=Te(new K(i+"."+n.slice(1)),l-g).plus(u),K.precision=k,e==null?w(y,k,N,C=!0):y;for(m=y,c=s=y=E(y.minus(1),y.plus(1),l,1),d=w(y.times(y),l,1),r=3;;){if(s=w(s.times(d),l,1),u=c.plus(E(s,new K(r),l,1)),z(u.d).slice(0,l)===z(c.d).slice(0,l))if(c=c.times(2),o!==0&&(c=c.plus(nt(K,l+2,k).times(o+""))),c=E(c,new K(b),l,1),e==null)if(Oe(c.d,l-g,N,a))K.precision=l+=g,u=s=y=E(m.minus(1),m.plus(1),l,1),d=w(y.times(y),l,1),r=a=1;else return w(c,K.precision=k,N,C=!0);else return K.precision=k,c;c=u,r+=2}}function Bn(t){return String(t.s*t.s/0)}function Ct(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(i,r),e){if(r-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%B,n<0&&(i+=B),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=B;i<r;)t.d.push(+e.slice(i,i+=B));e=e.slice(i),i=B-e.length}else i-=r;for(;i--;)e+="0";t.d.push(+e),C&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Si(t,e){var n,i,r,o,s,a,c,u,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),wn.test(e))return Ct(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(ki.test(e))n=16,e=e.toLowerCase();else if(Ti.test(e))n=2;else if(hi.test(e))n=8;else throw Error(ke+e);for(o=e.search(/p/i),o>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),s=o>=0,i=t.constructor,s&&(e=e.replace(".",""),a=e.length,o=a-o,r=kn(i,new i(n),o,o*2)),u=$e(e,n,le),l=u.length-1,o=l;u[o]===0;--o)u.pop();return o<0?new i(t.s*0):(t.e=rt(u,l),t.d=u,C=!1,s&&(t=E(t,r,a*4)),c&&(t=t.times(Math.abs(c)<54?U(2,c):De.pow(2,c))),C=!0,t)}function Ci(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:Me(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/ot(5,n)),e=Me(t,2,e,e);for(var r,o=new t(5),s=new t(16),a=new t(20);n--;)r=e.times(e),e=e.times(o.plus(r.times(s.times(r).minus(a))));return e}function Me(t,e,n,i,r){var o,s,a,c,u=1,l=t.precision,m=Math.ceil(l/B);for(C=!1,c=n.times(n),a=new t(i);;){if(s=E(a.times(c),new t(e++*e++),l,1),a=r?i.plus(s):i.minus(s),i=E(s.times(c),new t(e++*e++),l,1),s=a.plus(i),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=i,i=s,s=o,u++}return C=!0,s.d.length=m+1,s}function ot(t,e){for(var n=t;--e;)n*=t;return n}function xn(t,e){var n,i=e.s<0,r=ce(t,t.precision,1),o=r.times(.5);if(e=e.abs(),e.lte(o))return Pe=i?4:1,e;if(n=e.divToInt(r),n.isZero())Pe=i?3:2;else{if(e=e.minus(n.times(r)),e.lte(o))return Pe=pn(n)?i?2:3:i?4:1,e;Pe=pn(n)?i?1:4:i?3:2}return e.minus(r).abs()}function Kt(t,e,n,i){var r,o,s,a,c,u,l,m,d,b=t.constructor,g=n!==void 0;if(g?($(n,1,he),i===void 0?i=b.rounding:$(i,0,8)):(n=b.precision,i=b.rounding),!t.isFinite())l=Bn(t);else{for(l=me(t),s=l.indexOf("."),g?(r=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):r=e,s>=0&&(l=l.replace(".",""),d=new b(1),d.e=l.length-s,d.d=$e(me(d),10,r),d.e=d.d.length),m=$e(l,10,r),o=c=m.length;m[--c]==0;)m.pop();if(!m[0])l=g?"0p+0":"0";else{if(s<0?o--:(t=new b(t),t.d=m,t.e=o,t=E(t,d,n,i,0,r),m=t.d,o=t.e,u=yn),s=m[n],a=r/2,u=u||m[n+1]!==void 0,u=i<4?(s!==void 0||u)&&(i===0||i===(t.s<0?3:2)):s>a||s===a&&(i===4||u||i===6&&m[n-1]&1||i===(t.s<0?8:7)),m.length=n,u)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(c=m.length;!m[c-1];--c);for(s=0,l="";s<c;s++)l+=Bt.charAt(m[s]);if(g){if(c>1)if(e==16||e==8){for(s=e==16?4:3,--c;c%s;c++)l+="0";for(m=$e(l,r,e),c=m.length;!m[c-1];--c);for(s=1,l="1.";s<c;s++)l+=Bt.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>c)for(o-=c;o--;)l+="0";else o<c&&(l=l.slice(0,o)+"."+l.slice(o))}l=(e==16?"0x":e==2?"0b":e==8?"0o":"")+l}return t.s<0?"-"+l:l}function fn(t,e){if(t.length>e)return t.length=e,!0}function Ki(t){return new this(t).abs()}function Ni(t){return new this(t).acos()}function Li(t){return new this(t).acosh()}function Ri(t,e){return new this(t).plus(e)}function Fi(t){return new this(t).asin()}function Mi(t){return new this(t).asinh()}function vi(t){return new this(t).atan()}function Ei(t){return new this(t).atanh()}function Oi(t,e){t=new this(t),e=new this(e);var n,i=this.precision,r=this.rounding,o=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=ce(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?ce(this,i,r):new this(0),n.s=t.s):!t.d||e.isZero()?(n=ce(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(E(t,e,o,1)),e=ce(this,o,1),this.precision=i,this.rounding=r,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(E(t,e,o,1)),n}function Di(t){return new this(t).cbrt()}function Wi(t){return w(t=new this(t),t.e+1,2)}function Vi(t,e,n){return new this(t).clamp(e,n)}function _i(t){if(!t||typeof t!="object")throw Error(it+"Object expected");var e,n,i,r=t.defaults===!0,o=["precision",1,he,"rounding",0,8,"toExpNeg",-Fe,0,"toExpPos",0,Fe,"maxE",0,Fe,"minE",-Fe,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],r&&(this[n]=xt[n]),(i=t[n])!==void 0)if(Z(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(ke+n+": "+i);if(n="crypto",r&&(this[n]=xt[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Pn);else this[n]=!1;else throw Error(ke+n+": "+i);return this}function qi(t){return new this(t).cos()}function Gi(t){return new this(t).cosh()}function In(t){var e,n,i;function r(o){var s,a,c,u=this;if(!(u instanceof r))return new r(o);if(u.constructor=r,bn(o)){u.s=o.s,C?!o.d||o.e>r.maxE?(u.e=NaN,u.d=null):o.e<r.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(c=typeof o,c==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;C?s>r.maxE?(u.e=NaN,u.d=null):s<r.minE?(u.e=0,u.d=[0]):(u.e=s,u.d=[o]):(u.e=s,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Ct(u,o.toString())}else if(c!=="string")throw Error(ke+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(a===43&&(o=o.slice(1)),u.s=1),wn.test(o)?Ct(u,o):Si(u,o)}if(r.prototype=f,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=_i,r.clone=In,r.isDecimal=bn,r.abs=Ki,r.acos=Ni,r.acosh=Li,r.add=Ri,r.asin=Fi,r.asinh=Mi,r.atan=vi,r.atanh=Ei,r.atan2=Oi,r.cbrt=Di,r.ceil=Wi,r.clamp=Vi,r.cos=qi,r.cosh=Gi,r.div=Ui,r.exp=Xi,r.floor=zi,r.hypot=Hi,r.ln=Zi,r.log=Yi,r.log10=Qi,r.log2=ji,r.max=Ji,r.min=$i,r.mod=er,r.mul=tr,r.pow=nr,r.random=ir,r.round=rr,r.sign=or,r.sin=sr,r.sinh=ar,r.sqrt=ur,r.sub=cr,r.sum=lr,r.tan=mr,r.tanh=dr,r.trunc=pr,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function Ui(t,e){return new this(t).div(e)}function Xi(t){return new this(t).exp()}function zi(t){return w(t=new this(t),t.e+1,3)}function Hi(){var t,e,n=new this(0);for(C=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return C=!0,new this(1/0);n=e}return C=!0,n.sqrt()}function bn(t){return t instanceof De||t&&t.toStringTag===An||!1}function Zi(t){return new this(t).ln()}function Yi(t,e){return new this(t).log(e)}function ji(t){return new this(t).log(2)}function Qi(t){return new this(t).log(10)}function Ji(){return hn(this,arguments,"lt")}function $i(){return hn(this,arguments,"gt")}function er(t,e){return new this(t).mod(e)}function tr(t,e){return new this(t).mul(e)}function nr(t,e){return new this(t).pow(e)}function ir(t){var e,n,i,r,o=0,s=new this(1),a=[];if(t===void 0?t=this.precision:$(t,1,he),i=Math.ceil(t/B),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));o<i;)r=e[o],r>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);o<i;)r=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(r%1e7),o+=4);o=i/4}else throw Error(Pn);else for(;o<i;)a[o++]=Math.random()*1e7|0;for(i=a[--o],t%=B,i&&t&&(r=U(10,B-t),a[o]=(i/r|0)*r);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=B)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<B&&(n-=B-i)}return s.e=n,s.d=a,s}function rr(t){return w(t=new this(t),t.e+1,this.rounding)}function or(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sr(t){return new this(t).sin()}function ar(t){return new this(t).sinh()}function ur(t){return new this(t).sqrt()}function cr(t,e){return new this(t).sub(e)}function lr(){var t=0,e=arguments,n=new this(e[t]);for(C=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return C=!0,w(n,this.precision,this.rounding)}function mr(t){return new this(t).tan()}function dr(t){return new this(t).tanh()}function pr(t){return w(t=new this(t),t.e+1,1)}f[Symbol.for("nodejs.util.inspect.custom")]=f.toString;f[Symbol.toStringTag]="Decimal";var De=f.constructor=In(xt);et=new De(et);tt=new De(tt);var F=De;import Tr from"big.js";import la from"bn.js";import fr from"toformat";var br=fr,We=br;import at from"big.js";import gr from"bn.js";import Pr from"decimal.js-light";import Ve from"bn.js";var Sn=9007199254740991;function de(t){let e=j("Raydium_parseBigNumberish");if(t instanceof Ve)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new Ve(t);e.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&e.logWithError(`BigNumberish number underflow: ${t}`),(t>=Sn||t<=-Sn)&&e.logWithError(`BigNumberish number overflow: ${t}`),new Ve(String(t))):typeof t=="bigint"?new Ve(t.toString()):(e.error(`invalid BigNumberish value: ${t}`),new Ve(0))}var st=j("module/fraction"),Nt=We(at),_e=We(Pr),Ar={[0]:_e.ROUND_DOWN,[1]:_e.ROUND_HALF_UP,[2]:_e.ROUND_UP},wr={[0]:at.roundDown,[1]:at.roundHalfUp,[2]:at.roundUp},D=class{constructor(e,n=new gr(1)){this.numerator=de(e),this.denominator=de(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new D(this.denominator,this.numerator)}add(e){let n=e instanceof D?e:new D(de(e));return this.denominator.eq(n.denominator)?new D(this.numerator.add(n.numerator),this.denominator):new D(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(e){let n=e instanceof D?e:new D(de(e));return this.denominator.eq(n.denominator)?new D(this.numerator.sub(n.numerator),this.denominator):new D(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(e){let n=e instanceof D?e:new D(de(e));return new D(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(e){let n=e instanceof D?e:new D(de(e));return new D(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(e,n={groupSeparator:""},i=1){Number.isInteger(e)||st.logWithError(`${e} is not an integer.`),e<=0&&st.logWithError(`${e} is not positive.`),_e.set({precision:e+1,rounding:Ar[i]});let r=new _e(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return r.toFormat(r.decimalPlaces(),n)}toFixed(e,n={groupSeparator:""},i=1){return Number.isInteger(e)||st.logWithError(`${e} is not an integer.`),e<0&&st.logWithError(`${e} is negative.`),Nt.DP=e,Nt.RM=wr[i]||1,new Nt(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,n)}isZero(){return this.numerator.isZero()}};var Aa=j("Raydium_amount"),wa=We(Tr);import{PublicKey as hr}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Cn}from"@solana/spl-token";var Lt={chainId:101,address:hr.default.toBase58(),programId:Cn.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},Be={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Cn.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as Mt}from"@solana/web3.js";import{PublicKey as V,SystemProgram as Kn,SYSVAR_RENT_PUBKEY as Br}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as xr}from"@solana/spl-token";function Rt({pubkey:t,isSigner:e=!1,isWritable:n=!0}){return{pubkey:t,isWritable:n,isSigner:e}}var Ca=[Rt({pubkey:xr,isWritable:!1}),Rt({pubkey:Kn.programId,isWritable:!1}),Rt({pubkey:Br,isWritable:!1})];function Nn({publicKey:t,transformSol:e}){let n=Ln(t.toString());if(n instanceof V)return e&&n.equals(qe)?Je:n;if(e&&n.toString()===qe.toBase58())return Je;if(typeof n=="string"){if(n===V.default.toBase58())return V.default;try{return new V(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function Ln(t){try{return new V(t)}catch{return t}}var Ir=new V("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Sr=new V("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ft=new V("SysvarRent111111111111111111111111111111111"),Ka=new V("SysvarC1ock11111111111111111111111111111111"),ut=new V("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),Na=new V("Sysvar1nstructions1111111111111111111111111"),La=Kn.programId,Ra=new V("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Fa=new V("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Ma=new V("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),va=new V("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ea=new V("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Oa=new V("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Da=new V("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Wa=new V("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Va=new V("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),_a=new V("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),qa=new V("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Je=new V("So11111111111111111111111111111111111111112"),qe=V.default;var vt=class{constructor({mint:e,decimals:n,symbol:i,name:r,skipMint:o=!1,isToken2022:s=!1}){if(e===qe.toBase58()||e instanceof Mt&&qe.equals(e)){this.decimals=Be.decimals,this.symbol=Be.symbol,this.name=Be.name,this.mint=new Mt(Be.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=i||e.toString().substring(0,6),this.name=r||e.toString().substring(0,6),this.mint=o?Mt.default:Nn({publicKey:e}),this.isToken2022=s}equals(e){return this===e?!0:this.mint.equals(e.mint)}},xe=vt;xe.WSOL=new vt(G(_({},Be),{mint:Be.address}));var Et=class{constructor({decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=n,this.name=i}equals(e){return this===e}},ct=Et;ct.SOL=new Et(Lt);import Cr from"bn.js";var eu=new D(new Cr(100));var su=j("Raydium_price");import{PublicKey as hu}from"@solana/web3.js";import xu from"bn.js";var Kr=new pe(0),Gu=new pe(1),Uu=new pe(2),Xu=new pe(3),zu=new pe(5),kr=new pe(10),Hu=new pe(100),Zu=new pe(1e3),Yu=new pe(1e4);function Rn(t,e,n){return t.mul(e).add(n).sub(new pe(1)).div(n)}import{PublicKey as Ac}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Tc}from"@solana/spl-token";import{ComputeBudgetProgram as ic,Keypair as sc,PublicKey as Nr,Transaction as uc,TransactionMessage as lc,VersionedTransaction as mc}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as bc}from"@solana/spl-token";var yc=j("Raydium_txUtil");function ee(t,e){let[n,i]=Nr.findProgramAddressSync(t,e);return{publicKey:n,nonce:i}}import{PublicKey as T}from"@solana/web3.js";var xc=new T("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Ic=new T("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Sc=new T("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),Cc=new T("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),Kc=new T("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Nc=new T("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),Lc=new T("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Rc=new T("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Fc=new T("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Mc=new T("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Lr=new T("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Rr=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),Fr=new T("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),vc=new T("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ec=new T("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),Oc=new T("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Dc=new T("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Wc=new T("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Vc=new T("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),_c=new T("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),qc=new T("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),Gc=new T("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Uc=new T("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Xc=new T("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),zc=new T("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Mr=new T("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),Hc=new T("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Zc=new T("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Yc=new T("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),jc=new T("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Qc=new T("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Jc={OPEN_BOOK_PROGRAM:new T("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new T("Ray1111111111111111111111111111111111111111"),AMM_V4:new T("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new T("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new T("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new T("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new T("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new T("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new T("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new T("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new T("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new T("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:T.default,Router:new T("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new T("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new T("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new T("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new T("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new T("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new T("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new T("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new T("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new T("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new T("Ray1111111111111111111111111111111111111111")};import Y from"bn.js";var Ge=1e4;function Vt(t,e){let{div:n,mod:i}=t.divmod(e);return i.gt(new Y(0))?n.add(new Y(1)):n}function Se(t,e){if(t.isZero())return new Y(0);let n=t.div(e);return n.isZero()?new Y(1):t.mod(e).gt(new Y(0))?n.add(new Y(1)):n}function _t(t,e,n){if(e===void 0)return{amount:t,fee:void 0,expirationTime:void 0};let i=Math.floor(n/432e3),r=i<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,o=new Y(r.maximumFee.toString()),s=i<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-n)*400/1e3:void 0,a=Vt(t.mul(new Y(r.transferFeeBasisPoints)),new Y(Ge)),c=a.gt(o)?o:a;return{amount:t,fee:c,expirationTime:s}}function qt(t,e,n){if(e===void 0)return{amount:t,fee:void 0,expirationTime:void 0};let i=Math.floor(n/432e3),r=i<e.newerTransferFee.epoch?e.olderTransferFee:e.newerTransferFee,o=new Y(r.maximumFee.toString()),s=i<e.newerTransferFee.epoch?(Number(e.newerTransferFee.epoch)*432e3-n)*400/1e3:void 0;if(r.transferFeeBasisPoints===Ge){let a=new Y(r.maximumFee.toString());return{amount:t.add(a),fee:a,expirationTime:s}}else{let a=Vt(t.mul(new Y(Ge)),new Y(Ge-r.transferFeeBasisPoints)),c=new Y(r.maximumFee.toString()),u=a.sub(t).gt(c)?t.add(c):a,l=Vt(u.mul(new Y(r.transferFeeBasisPoints)),new Y(Ge)),m=l.gt(o)?o:l;return{amount:u,fee:m,expirationTime:s}}}import{PublicKey as vr,AddressLookupTableAccount as Fn}from"@solana/web3.js";var Er={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Fn({key:new vr("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Fn.deserialize(Buffer.from("AQAAAP//////////I1rcEwAAAAAvAQYwun9CU6c5Ikm2pAj+D9IEnCOR45nK+SFTGSdpd6J6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpBt324e51j94YQl285GzN2rYa/E2DuQ0n/r35KNihi/wFSlNQ+F3IgtYUpVZyeIopbd8eq6vQpgZ4iEky9O72oAVKU1qZKSEGTSTocWDaOHx8NbXdvJK7geQfqEBBBUSNBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvBkX2T9y7AHdNGviJAqQNtlDUDCnauQRWybsLji6nPM8Qkw5asQRvCdB3MbX6IEBwytOrpM32l4jQygKG9TKgR0vZScQ2AsM/IHeQ7RajUkyhuZdc8SGiqQz/7H34torNR/Wir3sl0ruUrVxJWEZfUg+QLNAxxODdBi53/OP7Ioil1cqeBM9dtZC3FLov4yyxWRM/wcGStyJX/QfTnLBAHqkqWotPKVlShCVQqpP9W5W1rOao65IMk5QuQ2kMIOxzDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu/YsA/yfEEFGcr8Z57VKDw8uQzpiru7g4lvjnfapW62W030syevD8k07SGoxUHiuT/ai7gAHWWhDsVmg/C63ajgpkH7Sn3GdutArDTfyqOkdqv4/IPC/EFFy7mGkfDd2C57N5a/4jC+BbmJy7wQaSEZr0CQU88lPtUxIVvzGjC95b8Ooss2TqmkrayGKofkPMGQn7Ux+9lfwBSNfxwH8NgbpqC/7LNlV4I7nCvsXf3p+ohQk9NrAJb2KAFpUqEIJ9ZBV7BYDzHF/ORKYlgtvPnXjudZQ6CEo5OzUDaNIomTCCsvhD16TxJjsbgne1kGnQPCFSoaxUbq2V1bPMFQ3VYP6wDZ9bKStCFKx9A3tNbwZFC5ZGAN83MFK7XoTy+OmmcFEr6rLOjfSuTfPvHJkSVxW6Qllwkl67XcBi5v00u2gQsbu+38sp+rd5pA/LvyWj4P94ZGZwc1tE2P88xekCLcAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAAn+HWRkdcPKyFFMnVwEoD7vnD0jCKFIU1sImubYCxNTSVzsKpaQX+fzNxrLAI3L14JQnJx/D6Uk2LADIHGqnGELzjEbkBDAlaM77NkXMPfqXNLSveCkWI7UEgNs31WEWB6XHSYI/v5DklHOb4QTtDOR804PVbi3fjloZeLR2F8d4FuZmMMO7ck3Fnkn2zEMG5gOmqsygb6PjTitArVl52NhcSznTxVnguaIJxiZkAnurDmn3MWR0PC2GLghp2KJqHCc6QQ85odeIjFHKOlRlJyeSXVJmL8vb1UgOzsbJPVP8p6zM4M3C1Sd7uWIHP33G42AP2Zg8ucn/n6meQjjD266JgCWdxZD6PXs9CsnIeL7SSG0/6lGb9xfP0ZcWkCXB/3hjxHYVXjra/GPOeXGk0fLLKjCbk+mgs2w6d2oCwimBipTzuoZ30GiI8ij8VRzD5CzMWtu2m21eDBIfjGAEo4pQeNNonKcqzV/cleX8ySZLOHsz8PtBCrLqF+VkLm9hOzIT+6i/nIf6keR4GWKMOD4AvqfpjHoD4DuhBpz8P28+DxkGrDXXr/nr20x291VPvcTU/b+b+o2kC9G0kcXeTlLjU6a2TQXWlZ4gBUdBl1jgT7mObSTpLblNiXZsLkbmVXZwvFKXua5cUKlWed/w30skmEUraTuQqtqr5fHZPW9n57EmeTif6LjHL2YJFZkQU+TrJmFzqzmF4/b8OwrPQAprl8mX3q4LUIdAS/a+11B6DWD1Xk2++Sn94dLC4xjkO4Wtlw8c4XuzciVbepHOmnoWzVu/0y3KCrLCSfQxQ3br8DJCoVzhgtPsS2nZZjsBGIZgnU0QpMv+2MnRsnKwdp1VsrCX84j/qvaZn4WhKunippgTbN2EUs0tPTP55Qfgj+nKmjtWW5IYs72FrEwJKYoNfsmqaF4o5pf4v9zgPwVwY/5I4XJKUL2L25m9kAQcW/K+H1RTFEUoj8Z4ajpOmAB/dG0COmCphVMW2CCMvnxhcGiSgPnpDuWu6qiJ7NG7ye5kvHgefgqPLeicspNJ5EpL3XiRNLM2tmJLI1awAwOyd6iHv0dCkMYRKaa6rcaZeYwmKCkckm0kM2JNmnmmAaBQQ7mwmIM0IMxX4f5W6j9PqZWcJxF7r17T/lQBAmcjoupRiJifbnXCNUv9GhpRF19WcBdeKbivRJVlGop6I2RS6lGImJ9udcI1S/0aGlEXX1ZwF14puK9ElWUainojZFYVHLHD6dIP2ESjqBzg3ol1/wB7+/ylGwd9LS7wSZ2A630CJSVKwH47K9P4bB8PEQP8BwjMFa7xQHOqZFP1XqaQ==","base64"))})};import{PublicKey as gl,sendAndConfirmTransaction as Pl,SystemProgram as Tl,Transaction as kl,TransactionMessage as Bl,VersionedTransaction as xl}from"@solana/web3.js";import Sl from"axios";import Or from"bn.js";var Ce=new Or(1e6);import{PublicKey as Yp}from"@solana/web3.js";import Qp from"bn.js";import{AccountLayout as tf,createAssociatedTokenAccountIdempotentInstruction as nf,TOKEN_2022_PROGRAM_ID as rf,TOKEN_PROGRAM_ID as of}from"@solana/spl-token";import{PublicKey as nm}from"@solana/web3.js";import{MintLayout as rm,TOKEN_PROGRAM_ID as sm}from"@solana/spl-token";import{Keypair as Ap,PublicKey as wp,SystemProgram as kp,TransactionInstruction as hp}from"@solana/web3.js";import xp from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as Cp,TOKEN_2022_PROGRAM_ID as Kp,TOKEN_PROGRAM_ID as Np}from"@solana/spl-token";import $d from"bn.js";import re from"bn.js";var Gt=new re(0),On=new re(1),Dn=new re(-1),fe=new re(1).shln(64),Wn=new re(1).shln(128),Ut=fe.sub(On);var Dr=Wn.subn(1),ve=-443636,Ue=-ve,Xt=new re("4295048016"),zt=new re("79226673521066979257578248091"),Pm=new re("4295048017"),Am=new re("79226673521066979257578248090");var Wr=new re(10).pow(new re(6));var wm=new re("18446744073700000000");import Wd from"bn.js";function Ht(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t,!1),new Uint8Array(e)}var Im=Buffer.from("amm_config","utf8"),Vn=Buffer.from("pool","utf8"),_n=Buffer.from("pool_vault","utf8"),Sm=Buffer.from("pool_reward_vault","utf8"),Cm=Buffer.from("position","utf8"),Km=Buffer.from("tick_array","utf8"),Nm=Buffer.from("operation","utf8"),Lm=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Rm=Buffer.from("observation","utf8");var Fm=Buffer.from("locked_position","utf8");var Mm=Buffer.from("support_mint","utf8");import{PublicKey as pd}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as bd}from"@solana/spl-token";import gd from"bn.js";import Om from"bn.js";var jt=14;var mt=60;var Gr=S([Q(8),I("bump"),ye("index"),h(""),Re("protocolFeeRate"),Re("tradeFeeRate"),ye("tickSpacing"),v(p(),8,"")]),Ur=S([Re("blockTimestamp"),un("tickCumulative"),v(p(),4)]),Jn=S([Q(8),kt("initialized"),p("recentEpoch"),ye("observationIndex"),h("poolId"),v(Ur,100,"observations"),v(p(),4)]),Xr=S([I("rewardState"),p("openTime"),p("endTime"),p("lastUpdateTime"),W("emissionsPerSecondX64"),p("rewardTotalEmissioned"),p("rewardClaimed"),h("tokenMint"),h("tokenVault"),h("creator"),W("rewardGrowthGlobalX64")]),Yn=S([Q(8),I("bump"),h("ammConfig"),h("creator"),h("mintA"),h("mintB"),h("vaultA"),h("vaultB"),h("observationId"),I("mintDecimalsA"),I("mintDecimalsB"),ye("tickSpacing"),W("liquidity"),W("sqrtPriceX64"),ge("tickCurrent"),Re(),W("feeGrowthGlobalX64A"),W("feeGrowthGlobalX64B"),p("protocolFeesTokenA"),p("protocolFeesTokenB"),W("swapInAmountTokenA"),W("swapOutAmountTokenB"),W("swapInAmountTokenB"),W("swapOutAmountTokenA"),I("status"),v(I(),7,""),v(Xr,3,"rewardInfos"),v(p(),16,"tickArrayBitmap"),p("totalFeesTokenA"),p("totalFeesClaimedTokenA"),p("totalFeesTokenB"),p("totalFeesClaimedTokenB"),p("fundFeesTokenA"),p("fundFeesTokenB"),p("startTime"),v(p(),15*4-3,"padding")]),zr=S([W("growthInsideLastX64"),p("rewardAmountOwed")]),jn=S([Q(8),I("bump"),h("nftMint"),h("poolId"),ge("tickLower"),ge("tickUpper"),W("liquidity"),W("feeGrowthInsideLastX64A"),W("feeGrowthInsideLastX64B"),p("tokenFeesOwedA"),p("tokenFeesOwedB"),v(zr,3,"rewardInfos"),v(p(),8,"")]),cp=S([Q(8),I("bump"),h("poolId"),ge("tickLowerIndex"),ge("tickUpperIndex"),W("liquidity"),W("feeGrowthInsideLastX64A"),W("feeGrowthInsideLastX64B"),p("tokenFeesOwedA"),p("tokenFeesOwedB"),v(W(),3,"rewardGrowthInside"),v(p(),8,"")]),Hr=S([ge("tick"),cn("liquidityNet"),W("liquidityGross"),W("feeGrowthOutsideX64A"),W("feeGrowthOutsideX64B"),v(W(),3,"rewardGrowthsOutsideX64"),v(Re(),13,"")]),Xn=S([Q(8),h("poolId"),ge("startTickIndex"),v(Hr,mt,"ticks"),I("initializedTickCount"),v(I(),115,"")]),Zr=S([Q(329),v(h(),100,"whitelistMints")]),qr=S([Q(8),h("poolId"),v(v(p(),8),jt,"positiveTickArrayBitmap"),v(v(p(),8),jt,"negativeTickArrayBitmap")]),lp=S([p(),I("bump"),h("owner"),h("poolId"),h("positionId"),h("nftAccount"),v(p(),8)]),Yr=S([Q(8),I("bump"),h("lockOwner"),h("poolId"),h("positionId"),h("nftAccount"),h("lockNftMint"),p("recentEpoch"),v(p(),8)]);Jn.span;var Wp=j("Raydium_Clmm");var to=Buffer.from("vault_auth_seed","utf8"),no=Buffer.from("global_config","utf8"),io=Buffer.from("pool_vesting","utf8"),ro=Buffer.from("platform_config","utf8"),oo=Buffer.from("platform_fee_vault_auth_seed","utf8"),so=Buffer.from("creator_fee_vault_auth_seed","utf8");function ao(t){return ee([to],t)}function Uf(t,e,n,i){return ee([no,e.toBuffer(),lo(n),Ht(i)],t)}function uo(t,e,n){return ee([Vn,e.toBuffer(),n.toBuffer()],t)}function co(t,e,n){return ee([_n,e.toBuffer(),n.toBuffer()],t)}function Ke(t){return ee([Buffer.from("__event_authority","utf8")],t)}function lo(t){let e=new ArrayBuffer(1);return new DataView(e).setUint8(0,t),new Uint8Array(e)}function mo(t,e){return ee([ro,e.toBuffer()],t)}function po(t,e,n){return ee([io,e.toBuffer(),n.toBuffer()],t)}function fo(t,e,n){return ee([e.toBuffer(),n.toBuffer()],t)}function bo(t){return ee([oo],t)}function yo(t,e,n){return ee([e.toBuffer(),n.toBuffer()],t)}function go(t){return ee([so],t)}var ie={initialize:Buffer.from([175,175,109,31,13,152,155,237]),buyExactIn:Buffer.from([250,234,13,123,213,156,19,236]),buyExactOut:Buffer.from([24,211,116,40,105,3,153,56]),sellExactIn:Buffer.from([149,39,222,155,211,124,152,26]),sellExactOut:Buffer.from([95,200,71,34,8,9,11,166]),createVestingAccount:Buffer.from([129,178,2,13,217,172,230,218]),claimVestedToken:Buffer.from([49,33,104,30,189,157,79,35]),createPlatformConfig:Buffer.from([176,90,196,175,253,113,220,20]),claimPlatformFee:Buffer.from([156,39,208,135,76,237,61,72]),updatePlaformConfig:Buffer.from([195,60,76,129,146,45,67,143]),initializeWithToken2022:Buffer.from([37,190,126,222,44,154,171,17]),claimPlatformFeeFromVault:Buffer.from([117,241,198,168,248,218,80,29]),claimCreatorFee:Buffer.from([26,97,138,203,132,171,141,252])};function Ao(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([I("decimals"),J("name"),J("symbol"),J("uri")]),R=S([p("totalLockedAmount"),p("cliffPeriod"),p("unlockPeriod")]),M=S([I("index"),p("supply"),p("totalFundRaisingB"),I("migrateType")]),ae=S([I("index"),p("supply"),p("totalSellA"),p("totalFundRaisingB"),I("migrateType")]),Ae=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:Qt,isSigner:!1,isWritable:!1},{pubkey:Qt,isSigner:!1,isWritable:!1},{pubkey:ut,isSigner:!1,isWritable:!1},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}],ue=Buffer.alloc(Buffer.from(b,"utf-8").length+Buffer.from(g,"utf-8").length+Buffer.from(y,"utf-8").length+4*3+1),be=Buffer.alloc(R.span),q=Buffer.alloc(x.type==="ConstantCurve"?ae.span:M.span);return L.encode({decimals:d,name:b,symbol:g,uri:y},ue),x.type==="ConstantCurve"?ae.encode(G(_({index:0},x),{migrateType:x.migrateType==="amm"?0:1}),q):x.type==="FixedCurve"?M.encode(G(_({index:1},x),{migrateType:x.migrateType==="amm"?0:1}),q):x.type==="LinearCurve"&&M.encode(G(_({index:2},x),{migrateType:x.migrateType==="amm"?0:1}),q),R.encode({totalLockedAmount:K,cliffPeriod:N,unlockPeriod:k},be),new ne({keys:Ae,programId:t,data:Buffer.from([...ie.initialize,...ue,...q,...be])})}function wo(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([I("decimals"),J("name"),J("symbol"),J("uri")]),R=S([p("totalLockedAmount"),p("cliffPeriod"),p("unlockPeriod"),I("transferFeeExtensionParamsOption"),S([ye("transferFeeBasePoints"),p("maxinumFee")]).replicate("transferFeeExtensionParams")]),M=S([I("index"),p("supply"),p("totalFundRaisingB"),I("migrateType")]),ae=S([I("index"),p("supply"),p("totalSellA"),p("totalFundRaisingB"),I("migrateType")]),Ae=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:Po,isSigner:!1,isWritable:!1},{pubkey:Qt,isSigner:!1,isWritable:!1},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}],ue=Buffer.alloc(Buffer.from(d,"utf-8").length+Buffer.from(b,"utf-8").length+Buffer.from(g,"utf-8").length+4*3+1),be=Buffer.alloc(R.span),q=Buffer.alloc(y.type==="ConstantCurve"?ae.span:M.span);return L.encode({decimals:m,name:d,symbol:b,uri:g},ue),y.type==="ConstantCurve"?ae.encode(G(_({index:0},y),{migrateType:y.migrateType==="amm"?0:1}),q):y.type==="FixedCurve"?M.encode(G(_({index:1},y),{migrateType:y.migrateType==="amm"?0:1}),q):y.type==="LinearCurve"&&M.encode(G(_({index:2},y),{migrateType:y.migrateType==="amm"?0:1}),q),R.encode({totalLockedAmount:x,cliffPeriod:K,unlockPeriod:N,transferFeeExtensionParamsOption:k?1:0,transferFeeExtensionParams:k!=null?k:{transferFeeBasePoints:0,maxinumFee:new He(0)}},be),new ne({keys:Ae,programId:t,data:Buffer.from([...ie.initializeWithToken2022,...ue,...q,...be])})}function To(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([p("amountB"),p("minAmountA"),p("shareFeeRate")]),R=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];k&&R.push({pubkey:k,isSigner:!1,isWritable:!0}),R.push({pubkey:oe.programId,isSigner:!1,isWritable:!1}),R.push({pubkey:g,isSigner:!1,isWritable:!0}),R.push({pubkey:y,isSigner:!1,isWritable:!0});let M=Buffer.alloc(L.span);return L.encode({amountB:x,minAmountA:K,shareFeeRate:N!=null?N:new He(0)},M),new ne({keys:R,programId:t,data:Buffer.from([...ie.buyExactIn,...M])})}function ko(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([p("amountA"),p("maxAmountB"),p("shareFeeRate")]),R=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];k&&R.push({pubkey:k,isSigner:!1,isWritable:!0}),R.push({pubkey:oe.programId,isSigner:!1,isWritable:!1}),R.push({pubkey:g,isSigner:!1,isWritable:!0}),R.push({pubkey:y,isSigner:!1,isWritable:!0});let M=Buffer.alloc(L.span);return L.encode({amountA:x,maxAmountB:K,shareFeeRate:N!=null?N:new He(0)},M),new ne({keys:R,programId:t,data:Buffer.from([...ie.buyExactOut,...M])})}function ho(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([p("amountA"),p("minAmountB"),p("shareFeeRate")]),R=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];k&&R.push({pubkey:k,isSigner:!1,isWritable:!0}),R.push({pubkey:oe.programId,isSigner:!1,isWritable:!1}),R.push({pubkey:g,isSigner:!1,isWritable:!0}),R.push({pubkey:y,isSigner:!1,isWritable:!0});let M=Buffer.alloc(L.span);return L.encode({amountA:x,minAmountB:K,shareFeeRate:N!=null?N:new He(0)},M),new ne({keys:R,programId:t,data:Buffer.from([...ie.sellExactIn,...M])})}function Bo(t,e,n,i,r,o,s,a,c,u,l,m,d,b,g,y,x,K,N,k){let L=S([p("amountB"),p("maxAmountA"),p("shareFeeRate")]),R=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:Ke(t).publicKey,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1}];k&&R.push({pubkey:k,isSigner:!1,isWritable:!0}),R.push({pubkey:oe.programId,isSigner:!1,isWritable:!1}),R.push({pubkey:g,isSigner:!1,isWritable:!0}),R.push({pubkey:y,isSigner:!1,isWritable:!0});let M=Buffer.alloc(L.span);return L.encode({amountB:x,maxAmountA:K,shareFeeRate:N!=null?N:new He(0)},M),new ne({keys:R,programId:t,data:Buffer.from([...ie.sellExactOut,...M])})}function xo(t,e,n,i,r,o,s,a,c){let u=S([]),l=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:dt,isSigner:!1,isWritable:!1}],m=Buffer.alloc(u.span);return u.encode({},m),new ne({keys:l,programId:t,data:Buffer.from([...ie.claimVestedToken,...m])})}function Io(t,e,n,i,r,o){let s=S([p("shareAmount")]),a=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oe.programId,isSigner:!1,isWritable:!1}],c=Buffer.alloc(s.span);return s.encode({shareAmount:o},c),new ne({keys:a,programId:t,data:Buffer.from([...ie.createVestingAccount,...c])})}function So(t,e,n,i,r,o,s,a,c){let u=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:oe.programId,isSigner:!1,isWritable:!0},{pubkey:dt,isSigner:!1,isWritable:!0}];return new ne({keys:u,programId:t,data:ie.claimPlatformFee})}function Co(t,e,n,i,r,o,s,a,c,u,l,m,d){let b=S([p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),J("name"),J("web"),J("img"),p("creatorFeeRate")]),g=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}],y=Buffer.alloc(8*5+Buffer.from(l,"utf-8").length+Buffer.from(m,"utf-8").length+Buffer.from(d,"utf-8").length+4*3);return b.encode({platformScale:a.platformScale,creatorScale:a.creatorScale,burnScale:a.burnScale,feeRate:c,name:l,web:m,img:d,creatorFeeRate:u},y),new ne({keys:g,programId:t,data:Buffer.from([...ie.createPlatformConfig,...y])})}function Ko(t,e,n,i){let r=[{pubkey:e,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0}],o;if(i.type==="updateClaimFeeWallet"){let s=S([I("index"),h("value")]);o=Buffer.alloc(s.span),s.encode({index:0,value:i.value},o)}else if(i.type==="updateLockNftWallet"){let s=S([I("index"),h("value")]);o=Buffer.alloc(s.span),s.encode({index:1,value:i.value},o)}else if(i.type==="migrateCpLockNftScale"){let s=S([I("index"),p("platformScale"),p("creatorScale"),p("burnScale")]);o=Buffer.alloc(s.span),s.encode(_({index:2},i.value),o)}else if(i.type==="updateFeeRate"){let s=S([I("index"),p("value")]);o=Buffer.alloc(s.span),s.encode({index:3,value:i.value},o)}else if(i.type==="updateImg"||i.type==="updateName"||i.type==="updateWeb"){let s=S([I("index"),J("value")]);o=Buffer.alloc(Buffer.from(i.value,"utf-8").length+4+1*1),i.type==="updateName"?s.encode({index:4,value:i.value},o):i.type==="updateWeb"?s.encode({index:5,value:i.value},o):i.type==="updateImg"&&s.encode({index:6,value:i.value},o)}else if(i.type==="updateCpConfigId"){r.push({pubkey:i.value,isSigner:!1,isWritable:!1});let s=S([I("index")]);o=Buffer.alloc(s.span),s.encode({index:7},o)}else if(i.type==="updateAll"){r.push({pubkey:i.value.cpConfigId,isSigner:!1,isWritable:!1});let s=S([I("index"),h("platformClaimFeeWallet"),h("platformLockNftWallet"),p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),J("name"),J("web"),J("img"),h("transferFeeExtensionAuth"),p("creatorFeeRate")]);o=Buffer.alloc(1+32+32+8*4+4*3+Buffer.from(i.value.name,"utf-8").length+Buffer.from(i.value.web,"utf-8").length+Buffer.from(i.value.img,"utf-8").length),s.encode({index:8,platformClaimFeeWallet:i.value.platformClaimFeeWallet,platformLockNftWallet:i.value.platformLockNftWallet,platformScale:i.value.migrateCpLockNftScale.platformScale,creatorScale:i.value.migrateCpLockNftScale.creatorScale,burnScale:i.value.migrateCpLockNftScale.burnScale,feeRate:i.value.feeRate,name:i.value.name,web:i.value.web,img:i.value.img,transferFeeExtensionAuth:i.value.transferFeeExtensionAuth,creatorFeeRate:i.value.creatorFeeRate},o)}else throw Error("updateInfo params type error");return new ne({keys:r,programId:t,data:Buffer.from([...ie.updatePlaformConfig,...o])})}function No(t,e,n,i,r,o,s,a){let c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:dt,isSigner:!1,isWritable:!1}];return new ne({keys:c,programId:t,data:ie.claimPlatformFeeFromVault})}function Lo(t,e,n,i,r,o,s){let a=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:oe.programId,isSigner:!1,isWritable:!1},{pubkey:dt,isSigner:!1,isWritable:!1}];return new ne({keys:a,programId:t,data:ie.claimCreatorFee})}var Ro=S([p(),p("epoch"),I("curveType"),ye("index"),p("migrateFee"),p("tradeFeeRate"),p("maxShareFeeRate"),p("minSupplyA"),p("maxLockRate"),p("minSellRateA"),p("minMigrateRateA"),p("minFundRaisingB"),h("mintB"),h("protocolFeeOwner"),h("migrateFeeOwner"),h("migrateToAmmWallet"),h("migrateToCpmmWallet"),v(p(),16)]),Fo=S([p("totalLockedAmount"),p("cliffPeriod"),p("unlockPeriod"),p("startTime"),p("totalAllocatedShare")]),Mo=S([p(),p("epoch"),I("bump"),I("status"),I("mintDecimalsA"),I("mintDecimalsB"),I("migrateType"),p("supply"),p("totalSellA"),p("virtualA"),p("virtualB"),p("realA"),p("realB"),p("totalFundRaisingB"),p("protocolFee"),p("platformFee"),p("migrateFee"),Fo.replicate("vestingSchedule"),h("configId"),h("platformId"),h("mintA"),h("mintB"),h("vaultA"),h("vaultB"),h("creator"),I("mintProgramFlag"),v(I(),63)]),nb=S([p(),p("epoch"),h("poolId"),h("beneficiary"),p("claimedAmount"),p("tokenShareAmount"),v(p(),8)]),vo=S([p(),p("epoch"),h("platformClaimFeeWallet"),h("platformLockNftWallet"),p("platformScale"),p("creatorScale"),p("burnScale"),p("feeRate"),v(I(),64,"name"),v(I(),256,"web"),v(I(),256,"img"),h("cpConfigId"),p("creatorFeeRate"),h("transferFeeExtensionAuth"),v(I(),184)]);import pt from"bn.js";var Ie=class{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){throw Error()}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){throw Error()}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:e,amount:n}){throw Error()}static buyExactOut({poolInfo:e,amount:n}){throw Error()}static sellExactIn({poolInfo:e,amount:n}){throw Error()}static sellExactOut({poolInfo:e,amount:n}){throw Error()}};var ft=class extends Ie{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new F(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new F(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new F(e.virtualB.add(e.realB).toString()).div(e.virtualA.sub(e.realA).toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new F(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new F(e.virtualB.add(e.realB.add(o)).toString()).div(e.virtualA.sub(e.realA.add(r)).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){if(e.lte(i))throw Error("supply need gt total sell");let s=e.sub(i).sub(r);if(s.lte(new pt(0)))throw Error("supplyMinusSellLocked <= 0");let a=n.sub(o);if(a.lte(new pt(0)))throw Error("tfMinusMf <= 0");let c=a.mul(i).mul(i).div(s),u=a.mul(i).div(s).sub(n),l=c.div(u),m=n.mul(n).div(u);if(l.lt(new pt(0))||m.lt(new pt(0)))throw Error("invalid input 0");return{a:l,b:m,c:i}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualB.add(e.realB),outputReserve:e.virtualA.sub(e.realA)})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,inputReserve:e.virtualA.sub(e.realA),outputReserve:e.virtualB.add(e.realB)})}static getAmountOut({amountIn:e,inputReserve:n,outputReserve:i}){let r=e.mul(i),o=n.add(e);return r.div(o)}static getAmountIn({amountOut:e,inputReserve:n,outputReserve:i}){let r=n.mul(e),o=i.sub(e);return Se(r,o)}};import se from"bn.js";import bt from"bn.js";var yt=class extends Ie{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new F(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new F(n.toString()).div(e.toString()).mul(10**(i-r))}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new F(e.virtualB.toString()).div(e.virtualA.toString()).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new F(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new F(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new bt(0)))throw Error("invalid input 1");let a=new bt(2).mul(n).sub(o),u=n.mul(s).div(a);if(u.lt(new bt(0))||n.lt(new bt(0)))throw Error("invalid input 0");return{a:u,b:n,c:u}}static buyExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualB,initOutput:e.virtualA})}static buyExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualB,initOutput:e.virtualA})}static sellExactIn({poolInfo:e,amount:n}){return this.getAmountOut({amountIn:n,initInput:e.virtualA,initOutput:e.virtualB})}static sellExactOut({poolInfo:e,amount:n}){return this.getAmountIn({amountOut:n,initInput:e.virtualA,initOutput:e.virtualB})}static getAmountOut({amountIn:e,initInput:n,initOutput:i}){return i.mul(e).div(n)}static getAmountIn({amountOut:e,initInput:n,initOutput:i}){let r=n.mul(e);return Se(r,i)}};import te from"bn.js";import Ee from"bn.js";var Ze=class{static _multipler(e){return new F(10).pow(e)}static getPrice({priceX64:e,decimalA:n,decimalB:i}){return new F(e.toString()).div(this._Q64).mul(this._multipler(n)).div(this._multipler(i))}static getPriceX64({price:e,decimalA:n,decimalB:i}){let r=e.mul(this._multipler(i)).div(this._multipler(n));return new Ee(r.mul(this._Q64).toFixed(0))}};Ze._Q64=new F(new Ee(1).shln(64).toString());function Ab({supply:t,totalFundRaisingB:e,totalLockedAmount:n,totalSellA:i,migrateType:r,decimalsA:o}){let s=t.sub(i).sub(n),a=new Ee(new F(s.mul(e).toString()).sqrt().toFixed(0));if(r==="amm"){if(a.gt(new Ee(10).pow(new Ee(o))))return!0}else if(r==="cpmm"){if(a.gt(new Ee(100)))return!0}else throw Error("migrate type error");return!1}var gt=class extends Ie{static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i}){return new F(0)}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r}){return new F(0)}static getPoolPrice({poolInfo:e,decimalA:n,decimalB:i}){return new F(e.virtualA.mul(e.realA).toString()).div(Ze._Q64).mul(10**(n-i))}static getPoolEndPrice({supply:e,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new F(r.sub(o).toString()).div(e.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:e,decimalA:n,decimalB:i}){let r=e.totalSellA.sub(e.realA),o=e.totalFundRaisingB.sub(e.realB);return new F(e.virtualB.add(e.realB).add(o).toString()).div(e.virtualA.sub(e.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=e.sub(r);if(s.lte(new te(0)))throw Error("supplyMinusLocked need gt 0");let a=n.mul(new te(3)).sub(o),u=n.mul(new te(2)).mul(s).div(a),l=u.mul(u),m=n.mul(new te(2)).mul(fe).div(l);if(!m.gt(new te(0)))throw Error("a need gt 0");if(!Ut.gt(m))throw Error("a need lt u64 max");if(m.lt(new te(0))||u.lt(new te(0)))throw Error("invalid input 0");return{a:m,b:new te(0),c:u}}static buyExactIn({poolInfo:e,amount:n}){let i=e.realB.add(n),r=new te(2).mul(i).mul(fe).div(e.virtualA);return new te(new F(r.toString()).sqrt().toFixed(0)).sub(e.realA)}static buyExactOut({poolInfo:e,amount:n}){let i=e.realA.add(n),r=i.mul(i);return Se(e.virtualA.mul(r),new te(2).mul(fe)).sub(e.realB)}static sellExactIn({poolInfo:e,amount:n}){let i=e.realA.sub(n),r=i.mul(i),o=Se(e.virtualA.mul(r),new te(2).mul(fe));return e.realB.sub(o)}static sellExactOut({poolInfo:e,amount:n}){let i=e.realB.sub(n),r=new te(2).mul(i).mul(fe).div(e.virtualA),o=new te(new F(r.toString()).sqrt().toFixed(0));return e.realA.sub(o)}};var Ye=class{static getPoolCurvePointByPoolInfo({curveType:e,pointCount:n,poolInfo:i}){return this.getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i.supply,totalFundRaising:i.totalFundRaisingB,totalSell:i.totalSellA,totalLockedAmount:i.vestingSchedule.totalLockedAmount,migrateFee:i.migrateFee,decimalA:i.mintDecimalsA,decimalB:i.mintDecimalsB})}static getPoolCurvePointByInit({curveType:e,pointCount:n,supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a,decimalA:c,decimalB:u}){if(n<3)throw Error("point count < 3");let l=this.getCurve(e),m=l.getInitParam({supply:i,totalFundRaising:r,totalSell:o,totalLockedAmount:s,migrateFee:a}),d=l.getPoolInitPriceByInit(G(_({},m),{decimalA:c,decimalB:u})),b=r.div(new se(n-1)),g=new se(0),y=[{price:d,totalSellSupply:0}],{a:x,b:K}=m,N=g,k=g;for(let L=1;L<n;L++){let R=L!==n-1?b:r.sub(k),M=this.buyExactIn({poolInfo:{virtualA:x,virtualB:K,realA:N,realB:k,totalFundRaisingB:r,totalSellA:o},amountB:R,protocolFeeRate:g,platformFeeRate:g,curveType:e,shareFeeRate:g,creatorFeeRate:g,transferFeeConfigA:void 0,slot:0});N=N.add(M.amountA.amount),k=k.add(M.amountB);let ae=this.getPrice({poolInfo:{virtualA:x,virtualB:K,realA:N,realB:k},decimalA:c,decimalB:u,curveType:e});y.push({price:ae,totalSellSupply:new F(N.toString()).div(10**c).toNumber()})}return y}static getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i,curveType:r}){return this.getCurve(r).getPoolInitPriceByPool({poolInfo:e,decimalA:n,decimalB:i})}static getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r,curveType:o}){return this.getCurve(o).getPoolInitPriceByInit({a:e,b:n,decimalA:i,decimalB:r})}static getPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getEndPrice({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolPrice({poolInfo:e,decimalA:i,decimalB:r})}static getPoolEndPriceReal({poolInfo:e,curveType:n,decimalA:i,decimalB:r}){return this.getCurve(n).getPoolEndPriceReal({poolInfo:e,decimalA:i,decimalB:r})}static checkParam({supply:e,totalFundRaising:n,totalSell:i,totalLockedAmount:r,decimals:o,config:s,migrateType:a}){if(Number(o)!==6)throw Error("decimals = 6");if(e.mul(s.maxLockRate).div(Ce).lt(r))throw Error("total lock amount gte max lock amount");if(e.lt(s.minSupplyA.mul(new se(10**o))))throw Error("supply lt min supply");let u=e.mul(s.minSellRateA).div(Ce);if(i.lt(u))throw Error("invalid input");if(n.lt(s.minFundRaisingB))throw Error("total fund raising lt min fund raising");let l=e.sub(i).sub(r),m=e.mul(s.minMigrateRateA).div(Ce);if(l.lt(m))throw Error("migrate lt min migrate amoount");let d=e.sub(i).sub(r),b=new se(new F(d.mul(n).toString()).sqrt().toFixed(0));if(a==="amm"){let g=new se(10).pow(new se(o));if(b.lte(g))throw Error("check migrate lp error")}else if(a==="cpmm"){let g=new se(100);if(b.lte(g))throw Error("check migrate lp error")}else throw Error("migrate type error")}static buyExactIn({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s,creatorFeeRate:a,transferFeeConfigA:c,slot:u}){let l=this.totalFeeRate({protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a}),m=this.calculateFee({amount:n,feeRate:l}),d=n.sub(m),b=this.getCurve(o),g=b.buyExactIn({poolInfo:e,amount:d}),y=e.totalSellA.sub(e.realA),x,K,N;if(g.gt(y)){x=y;let L=b.buyExactOut({poolInfo:e,amount:x});K=this.calculatePreFee({postFeeAmount:L,feeRate:l}),N=K.sub(L)}else x=g,K=n,N=m;let k=this.splitFee({totalFee:N,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a});return{amountA:_t(x,c,u),amountB:K,splitFee:k}}static buyExactOut({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s,creatorFeeRate:a,transferFeeConfigA:c,slot:u}){let l=e.totalSellA.sub(e.realA),m=qt(n,c,u),d=m.fee?m.amount.add(m.fee):m.amount;n.gt(l)&&(d=l);let g=this.getCurve(o).buyExactOut({poolInfo:e,amount:d}),y=this.totalFeeRate({protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a}),x=this.calculatePreFee({postFeeAmount:g,feeRate:y}),K=x.sub(g),N=this.splitFee({totalFee:K,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a});return{amountA:m,amountB:x,splitFee:N}}static sellExactIn({poolInfo:e,amountA:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s,creatorFeeRate:a,transferFeeConfigA:c,slot:u}){let l=this.getCurve(o),m=_t(n,c,u),d=m.fee?m.amount.sub(m.fee):m.amount,b=l.sellExactIn({poolInfo:e,amount:d}),g=this.calculateFee({amount:b,feeRate:this.totalFeeRate({protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a})}),y=this.splitFee({totalFee:g,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a});return{amountA:m,amountB:b.sub(g),splitFee:y}}static sellExactOut({poolInfo:e,amountB:n,protocolFeeRate:i,platformFeeRate:r,curveType:o,shareFeeRate:s,creatorFeeRate:a,transferFeeConfigA:c,slot:u}){let l=this.totalFeeRate({protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a}),m=this.calculatePreFee({postFeeAmount:n,feeRate:l});if(e.realB.lt(m))throw Error("Insufficient liquidity");let d=m.sub(n),g=Ye.getCurve(o).sellExactOut({poolInfo:e,amount:m});if(g.gt(e.realA))throw Error();let y=this.splitFee({totalFee:d,protocolFeeRate:i,platformFeeRate:r,shareFeeRate:s,creatorFeeRate:a});return{amountA:qt(g,c,u),amountB:n,splitFee:y}}static splitFee({totalFee:e,protocolFeeRate:n,platformFeeRate:i,shareFeeRate:r,creatorFeeRate:o}){let s=this.totalFeeRate({protocolFeeRate:n,platformFeeRate:i,shareFeeRate:r,creatorFeeRate:o}),a=s.isZero()?new se(0):e.mul(i).div(s),c=s.isZero()?new se(0):e.mul(r).div(s),u=s.isZero()?new se(0):e.mul(o).div(s),l=e.sub(a).sub(c).sub(u);return{platformFee:a,shareFee:c,protocolFee:l,creatorFee:u}}static calculateFee({amount:e,feeRate:n}){return Rn(e,n,Ce)}static calculatePreFee({postFeeAmount:e,feeRate:n}){if(n.isZero())return e;let i=e.mul(Ce),r=Ce.sub(n);return i.add(r).sub(new se(1)).div(r)}static totalFeeRate({protocolFeeRate:e,platformFeeRate:n,shareFeeRate:i,creatorFeeRate:r}){if(e.add(n).add(i).add(r).gt(new se(1e6)))throw Error("total fee rate gt 1_000_000");return e.add(n).add(i).add(r)}static getCurve(e){switch(e){case 0:return ft;case 1:return yt;case 2:return gt}throw Error("find curve error")}};import{NATIVE_MINT as zb,TOKEN_2022_PROGRAM_ID as Hb,TOKEN_PROGRAM_ID as Zb,createAssociatedTokenAccountIdempotentInstruction as jb,getTransferFeeConfig as Qb,unpackMint as Jb}from"@solana/spl-token";import X from"bn.js";import{PublicKey as Eo}from"@solana/web3.js";var sy={initPriceX64:new X("515752397214619"),supply:new X(1e15),totalSellA:new X(7931e11),totalFundRaisingB:new X(85e9),totalLockedAmount:new X("0"),cliffPeriod:new X("0"),unlockPeriod:new X("0"),decimals:6,virtualA:new X("1073471847374405"),virtualB:new X("30050573465"),realA:new X(0),realB:new X(0),protocolFee:new X(0),platformId:new Eo("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),vestingSchedule:{totalLockedAmount:new X(0),cliffPeriod:new X(0),unlockPeriod:new X(0),startTime:new X(0),totalAllocatedShare:new X(0)}},ay=new X(1e4);export{to as AUTH_SEED,no as CONFIG_SEED,so as CREATOR_FEE_VAULT_AUTH_SEED,Ye as Curve,Ie as CurveBase,yt as FixedPriceCurve,ft as LaunchConstantProductCurve,Ro as LaunchpadConfig,Mo as LaunchpadPool,sy as LaunchpadPoolInitParam,nb as LaunchpadVesting,gt as LinearPriceCurve,Ze as MathLaunch,oo as PLATFORM_FEE_VAULT_AUTH_SEED,ro as PLATFORM_SEED,io as POOL_VESTING_SEED,vo as PlatformConfig,Fo as VestingSchedule,ie as anchorDataBuf,To as buyExactInInstruction,ko as buyExactOutInstruction,Ab as checkPoolToAmm,Lo as claimCreatorFee,So as claimPlatformFee,No as claimPlatformFeeFromVault,xo as claimVestedToken,Co as createPlatformConfig,Io as createVestingAccount,Ke as getPdaCpiEvent,go as getPdaCreatorFeeVaultAuth,yo as getPdaCreatorVault,ao as getPdaLaunchpadAuth,Uf as getPdaLaunchpadConfigId,uo as getPdaLaunchpadPoolId,co as getPdaLaunchpadVaultId,bo as getPdaPlatformFeeVaultAuth,mo as getPdaPlatformId,fo as getPdaPlatformVault,po as getPdaVestId,Ao as initialize,wo as initializeWithToken2022,ho as sellExactInInstruction,Bo as sellExactOut,lo as u8ToBytes,Ko as updatePlatformConfig};
//# sourceMappingURL=index.mjs.map