var kn=Object.defineProperty,hn=Object.defineProperties;var Bn=Object.getOwnPropertyDescriptors;var It=Object.getOwnPropertySymbols;var xn=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable;var St=(e,t,n)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))xn.call(t,n)&&St(e,n,t[n]);if(It)for(var n of It(t))In.call(t,n)&&St(e,n,t[n]);return e},J=(e,t)=>hn(e,Bn(t));import U from"bn.js";var de=9e15,ue=1e9,Je="0123456789abcdef",Fe="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Oe="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$e={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-de,maxE:de,crypto:!1},Lt,ie,A=!0,ve="[DecimalError] ",ce=ve+"Invalid argument: ",Rt=ve+"Precision limit exceeded",Mt=ve+"crypto unavailable",Ft="[object Decimal]",D=Math.floor,M=Math.pow,Sn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Cn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Kn=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ot=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Y=1e7,y=7,Nn=9007199254740991,Ln=Fe.length-1,et=Oe.length-1,p={toStringTag:Ft};p.absoluteValue=p.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),f(e)};p.ceil=function(){return f(new this.constructor(this),this.e+1,2)};p.clampedTo=p.clamp=function(e,t){var n,i=this,r=i.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(ce+t);return n=i.cmp(e),n<0?e:i.cmp(t)>0?t:new r(i)};p.comparedTo=p.cmp=function(e){var t,n,i,r,o=this,s=o.d,a=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!s||!a)return!u||!c?NaN:u!==c?u:s===a?0:!s^u<0?1:-1;if(!s[0]||!a[0])return s[0]?u:a[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(i=s.length,r=a.length,t=0,n=i<r?i:r;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return i===r?0:i>r^u<0?1:-1};p.cosine=p.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+y,i.rounding=1,n=Rn(i,_t(i,n)),i.precision=e,i.rounding=t,f(ie==2||ie==3?n.neg():n,e,t,!0)):new i(1):new i(NaN)};p.cubeRoot=p.cbrt=function(){var e,t,n,i,r,o,s,a,u,c,l=this,m=l.constructor;if(!l.isFinite()||l.isZero())return new m(l);for(A=!1,o=l.s*M(l.s*l,1/3),!o||Math.abs(o)==1/0?(n=O(l.d),e=l.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=M(n,1/3),e=D((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),i=new m(n),i.s=l.s):i=new m(o.toString()),s=(e=m.precision)+3;;)if(a=i,u=a.times(a).times(a),c=u.plus(l),i=I(c.plus(l).times(a),c.plus(u),s+2,1),O(a.d).slice(0,s)===(n=O(i.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!r&&n=="4999"){if(!r&&(f(a,e+1,0),a.times(a).times(a).eq(l))){i=a;break}s+=4,r=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(f(i,e+1,1),t=!i.times(i).times(i).eq(l));break}return A=!0,f(i,e,m.rounding,t)};p.decimalPlaces=p.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-D(this.e/y))*y,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};p.dividedBy=p.div=function(e){return I(this,new this.constructor(e))};p.dividedToIntegerBy=p.divToInt=function(e){var t=this,n=t.constructor;return f(I(t,new n(e),0,1,1),n.precision,n.rounding)};p.equals=p.eq=function(e){return this.cmp(e)===0};p.floor=function(){return f(new this.constructor(this),this.e+1,3)};p.greaterThan=p.gt=function(e){return this.cmp(e)>0};p.greaterThanOrEqualTo=p.gte=function(e){var t=this.cmp(e);return t==1||t===0};p.hyperbolicCosine=p.cosh=function(){var e,t,n,i,r,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,i=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,r=o.d.length,r<32?(e=Math.ceil(r/3),t=(1/Ve(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=pe(s,1,o.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return f(o,s.precision=n,s.rounding=i,!0)};p.hyperbolicSine=p.sinh=function(){var e,t,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(r.e,r.sd())+4,o.rounding=1,i=r.d.length,i<3)r=pe(o,2,r,r,!0);else{e=1.4*Math.sqrt(i),e=e>16?16:e|0,r=r.times(1/Ve(5,e)),r=pe(o,2,r,r,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);e--;)s=r.times(r),r=r.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=t,o.rounding=n,f(r,t,n,!0)};p.hyperbolicTangent=p.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+7,i.rounding=1,I(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)};p.inverseCosine=p.acos=function(){var e,t=this,n=t.constructor,i=t.abs().cmp(1),r=n.precision,o=n.rounding;return i!==-1?i===0?t.isNeg()?Q(n,r,o):new n(0):new n(NaN):t.isZero()?Q(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=Q(n,r+4,o).times(.5),n.precision=r,n.rounding=o,e.minus(t))};p.inverseHyperbolicCosine=p.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(e=i.precision,t=i.rounding,i.precision=e+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,A=!1,n=n.times(n).minus(1).sqrt().plus(n),A=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)};p.inverseHyperbolicSine=p.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,A=!1,n=n.times(n).plus(1).sqrt().plus(n),A=!0,i.precision=e,i.rounding=t,n.ln())};p.inverseHyperbolicTangent=p.atanh=function(){var e,t,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,i=r.sd(),Math.max(i,e)<2*-r.e-1?f(new o(r),e,t,!0):(o.precision=n=i-r.e,r=I(r.plus(1),new o(1).minus(r),n+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)};p.inverseSine=p.asin=function(){var e,t,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),n=o.precision,i=o.rounding,t!==-1?t===0?(e=Q(o,n+4,i).times(.5),e.s=r.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))};p.inverseTangent=p.atan=function(){var e,t,n,i,r,o,s,a,u,c=this,l=c.constructor,m=l.precision,d=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&m+4<=et)return s=Q(l,m+4,d).times(.25),s.s=c.s,s}else{if(!c.s)return new l(NaN);if(m+4<=et)return s=Q(l,m+4,d).times(.5),s.s=c.s,s}for(l.precision=a=m+10,l.rounding=1,n=Math.min(28,a/y+2|0),e=n;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(A=!1,t=Math.ceil(a/y),i=1,u=c.times(c),s=new l(c),r=c;e!==-1;)if(r=r.times(u),o=s.minus(r.div(i+=2)),r=r.times(u),s=o.plus(r.div(i+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),A=!0,f(s,l.precision=m,l.rounding=d,!0)};p.isFinite=function(){return!!this.d};p.isInteger=p.isInt=function(){return!!this.d&&D(this.e/y)>this.d.length-2};p.isNaN=function(){return!this.s};p.isNegative=p.isNeg=function(){return this.s<0};p.isPositive=p.isPos=function(){return this.s>0};p.isZero=function(){return!!this.d&&this.d[0]===0};p.lessThan=p.lt=function(e){return this.cmp(e)<0};p.lessThanOrEqualTo=p.lte=function(e){return this.cmp(e)<1};p.logarithm=p.log=function(e){var t,n,i,r,o,s,a,u,c=this,l=c.constructor,m=l.precision,d=l.rounding,b=5;if(e==null)e=new l(10),t=!0;else{if(e=new l(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new l(NaN);t=e.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new l(n&&!n[0]?-1/0:c.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(r=n[0];r%10===0;)r/=10;o=r!==1}if(A=!1,a=m+b,s=ae(c,a),i=t?Ee(l,a+10):ae(e,a),u=I(s,i,a,1),we(u.d,r=m,d))do if(a+=10,s=ae(c,a),i=t?Ee(l,a+10):ae(e,a),u=I(s,i,a,1),!o){+O(u.d).slice(r+1,r+15)+1==1e14&&(u=f(u,m+1,0));break}while(we(u.d,r+=10,d));return A=!0,f(u,m,d)};p.minus=p.sub=function(e){var t,n,i,r,o,s,a,u,c,l,m,d,b=this,h=b.constructor;if(e=new h(e),!b.d||!e.d)return!b.s||!e.s?e=new h(NaN):b.d?e.s=-e.s:e=new h(e.d||b.s!==e.s?b:NaN),e;if(b.s!=e.s)return e.s=-e.s,b.plus(e);if(c=b.d,d=e.d,a=h.precision,u=h.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else if(c[0])e=new h(b);else return new h(u===3?-0:0);return A?f(e,a,u):e}if(n=D(e.e/y),l=D(b.e/y),c=c.slice(),o=l-n,o){for(m=o<0,m?(t=c,o=-o,s=d.length):(t=d,n=l,s=c.length),i=Math.max(Math.ceil(a/y),s)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=c.length,s=d.length,m=i<s,m&&(s=i),i=0;i<s;i++)if(c[i]!=d[i]){m=c[i]<d[i];break}o=0}for(m&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,i=d.length-s;i>0;--i)c[s++]=0;for(i=d.length;i>o;){if(c[--i]<d[i]){for(r=i;r&&c[--r]===0;)c[r]=Y-1;--c[r],c[i]+=Y}c[i]-=d[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=De(c,n),A?f(e,a,u):e):new h(u===3?-0:0)};p.modulo=p.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?f(new i(n),i.precision,i.rounding):(A=!1,i.modulo==9?(t=I(n,e.abs(),0,3,1),t.s*=e.s):t=I(n,e,0,i.modulo,1),t=t.times(e),A=!0,n.minus(t))};p.naturalExponential=p.exp=function(){return tt(this)};p.naturalLogarithm=p.ln=function(){return ae(this)};p.negated=p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,f(e)};p.plus=p.add=function(e){var t,n,i,r,o,s,a,u,c,l,m=this,d=m.constructor;if(e=new d(e),!m.d||!e.d)return!m.s||!e.s?e=new d(NaN):m.d||(e=new d(e.d||m.s===e.s?m:NaN)),e;if(m.s!=e.s)return e.s=-e.s,m.minus(e);if(c=m.d,l=e.d,a=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(m)),A?f(e,a,u):e;if(o=D(m.e/y),i=D(e.e/y),c=c.slice(),r=o-i,r){for(r<0?(n=c,r=-r,s=l.length):(n=l,i=o,s=c.length),o=Math.ceil(a/y),s=o>s?o+1:s+1,r>s&&(r=s,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for(s=c.length,r=l.length,s-r<0&&(r=s,n=l,l=c,c=n),t=0;r;)t=(c[--r]=c[r]+l[r]+t)/Y|0,c[r]%=Y;for(t&&(c.unshift(t),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=De(c,i),A?f(e,a,u):e};p.precision=p.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ce+e);return n.d?(t=Et(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};p.round=function(){var e=this,t=e.constructor;return f(new t(e),e.e+1,t.rounding)};p.sine=p.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+y,i.rounding=1,n=Fn(i,_t(i,n)),i.precision=e,i.rounding=t,f(ie>2?n.neg():n,e,t,!0)):new i(NaN)};p.squareRoot=p.sqrt=function(){var e,t,n,i,r,o,s=this,a=s.d,u=s.e,c=s.s,l=s.constructor;if(c!==1||!a||!a[0])return new l(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);for(A=!1,c=Math.sqrt(+s),c==0||c==1/0?(t=O(a),(t.length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=D((u+1)/2)-(u<0||u%2),c==1/0?t="5e"+u:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),i=new l(t)):i=new l(c.toString()),n=(u=l.precision)+3;;)if(o=i,i=o.plus(I(s,o,n+2,1)).times(.5),O(o.d).slice(0,n)===(t=O(i.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!r&&t=="4999"){if(!r&&(f(o,u+1,0),o.times(o).eq(s))){i=o;break}n+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(f(i,u+1,1),e=!i.times(i).eq(s));break}return A=!0,f(i,u,l.rounding,e)};p.tangent=p.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,n=n.sin(),n.s=1,n=I(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,f(ie==2||ie==4?n.neg():n,e,t,!0)):new i(NaN)};p.times=p.mul=function(e){var t,n,i,r,o,s,a,u,c,l=this,m=l.constructor,d=l.d,b=(e=new m(e)).d;if(e.s*=l.s,!d||!d[0]||!b||!b[0])return new m(!e.s||d&&!d[0]&&!b||b&&!b[0]&&!d?NaN:!d||!b?e.s/0:e.s*0);for(n=D(l.e/y)+D(e.e/y),u=d.length,c=b.length,u<c&&(o=d,d=b,b=o,s=u,u=c,c=s),o=[],s=u+c,i=s;i--;)o.push(0);for(i=c;--i>=0;){for(t=0,r=u+i;r>i;)a=o[r]+b[i]*d[r-i-1]+t,o[r--]=a%Y|0,t=a/Y|0;o[r]=(o[r]+t)%Y|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=De(o,n),A?f(e,m.precision,m.rounding):e};p.toBinary=function(e,t){return it(this,2,e,t)};p.toDecimalPlaces=p.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),e===void 0?n:(G(e,0,ue),t===void 0?t=i.rounding:G(t,0,8),f(n,e+n.e+1,t))};p.toExponential=function(e,t){var n,i=this,r=i.constructor;return e===void 0?n=$(i,!0):(G(e,0,ue),t===void 0?t=r.rounding:G(t,0,8),i=f(new r(i),e+1,t),n=$(i,!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return e===void 0?n=$(r):(G(e,0,ue),t===void 0?t=o.rounding:G(t,0,8),i=f(new o(r),e+r.e+1,t),n=$(i,!1,e+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};p.toFraction=function(e){var t,n,i,r,o,s,a,u,c,l,m,d,b=this,h=b.d,T=b.constructor;if(!h)return new T(b);if(c=n=new T(1),i=u=new T(0),t=new T(i),o=t.e=Et(h)-b.e-1,s=o%y,t.d[0]=M(10,s<0?y+s:s),e==null)e=o>0?t:c;else{if(a=new T(e),!a.isInt()||a.lt(c))throw Error(ce+a);e=a.gt(t)?o>0?t:c:a}for(A=!1,a=new T(O(h)),l=T.precision,T.precision=o=h.length*y*2;m=I(a,t,0,1,1),r=n.plus(m.times(i)),r.cmp(e)!=1;)n=i,i=r,r=c,c=u.plus(m.times(r)),u=r,r=t,t=a.minus(m.times(r)),a=r;return r=I(e.minus(n),i,0,1,1),u=u.plus(r.times(c)),n=n.plus(r.times(i)),u.s=c.s=b.s,d=I(c,i,o,1).minus(b).abs().cmp(I(u,n,o,1).minus(b).abs())<1?[c,i]:[u,n],T.precision=l,A=!0,d};p.toHexadecimal=p.toHex=function(e,t){return it(this,16,e,t)};p.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),e==null){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),t===void 0?t=i.rounding:G(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(A=!1,n=I(n,e,0,t,1).times(e),A=!0,f(n)):(e.s=n.s,n=e),n};p.toNumber=function(){return+this};p.toOctal=function(e,t){return it(this,8,e,t)};p.toPower=p.pow=function(e){var t,n,i,r,o,s,a=this,u=a.constructor,c=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(M(+a,c));if(a=new u(a),a.eq(1))return a;if(i=u.precision,o=u.rounding,e.eq(1))return f(a,i,o);if(t=D(e.e/y),t>=e.d.length-1&&(n=c<0?-c:c)<=Nn)return r=vt(u,a,n,i),e.s<0?new u(1).div(r):f(r,i,o);if(s=a.s,s<0){if(t<e.d.length-1)return new u(NaN);if((e.d[t]&1)==0&&(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=M(+a,c),t=n==0||!isFinite(n)?D(c*(Math.log("0."+O(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(A=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),r=tt(e.times(ae(a,i+n)),i),r.d&&(r=f(r,i+5,1),we(r.d,i,o)&&(t=i+10,r=f(tt(e.times(ae(a,t+n)),t),t+5,1),+O(r.d).slice(i+1,i+15)+1==1e14&&(r=f(r,i+1,0)))),r.s=s,A=!0,u.rounding=o,f(r,i,o))};p.toPrecision=function(e,t){var n,i=this,r=i.constructor;return e===void 0?n=$(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(G(e,1,ue),t===void 0?t=r.rounding:G(t,0,8),i=f(new r(i),e,t),n=$(i,e<=i.e||i.e<=r.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n};p.toSignificantDigits=p.toSD=function(e,t){var n=this,i=n.constructor;return e===void 0?(e=i.precision,t=i.rounding):(G(e,1,ue),t===void 0?t=i.rounding:G(t,0,8)),f(new i(n),e,t)};p.toString=function(){var e=this,t=e.constructor,n=$(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};p.truncated=p.trunc=function(){return f(new this.constructor(this),this.e+1,1)};p.valueOf=p.toJSON=function(){var e=this,t=e.constructor,n=$(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function O(e){var t,n,i,r=e.length-1,o="",s=e[0];if(r>0){for(o+=s,t=1;t<r;t++)i=e[t]+"",n=y-i.length,n&&(o+=se(n)),o+=i;s=e[t],i=s+"",n=y-i.length,n&&(o+=se(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function G(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ce+e)}function we(e,t,n,i){var r,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=y,r=0):(r=Math.ceil((t+1)/y),t%=y),o=M(10,y-t),a=e[r]%o|0,i==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[r+1]/o/100|0)==M(10,t-2)-1||(a==o/2||a==0)&&(e[r+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(i||n<4)&&a==9999||!i&&n>3&&a==4999):s=((i||n<4)&&a+1==o||!i&&n>3&&a+1==o/2)&&(e[r+1]/o/1e3|0)==M(10,t-3)-1,s}function Me(e,t,n){for(var i,r=[0],o,s=0,a=e.length;s<a;){for(o=r.length;o--;)r[o]*=t;for(r[0]+=Je.indexOf(e.charAt(s++)),i=0;i<r.length;i++)r[i]>n-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}function Rn(e,t){var n,i,r;if(t.isZero())return t;i=t.d.length,i<32?(n=Math.ceil(i/3),r=(1/Ve(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=pe(e,1,t.times(r),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var I=function(){function e(i,r,o){var s,a=0,u=i.length;for(i=i.slice();u--;)s=i[u]*r+a,i[u]=s%o|0,a=s/o|0;return a&&i.unshift(a),i}function t(i,r,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(i[a]!=r[a]){u=i[a]>r[a]?1:-1;break}return u}function n(i,r,o,s){for(var a=0;o--;)i[o]-=a,a=i[o]<r[o]?1:0,i[o]=a*s+i[o]-r[o];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,o,s,a,u){var c,l,m,d,b,h,T,_,R,Z,x,E,Ke,ne,je,Ne,ye,Qe,z,Le,Re=i.constructor,Ye=i.s==r.s?1:-1,v=i.d,S=r.d;if(!v||!v[0]||!S||!S[0])return new Re(!i.s||!r.s||(v?S&&v[0]==S[0]:!S)?NaN:v&&v[0]==0||!S?Ye*0:Ye/0);for(u?(b=1,l=i.e-r.e):(u=Y,b=y,l=D(i.e/b)-D(r.e/b)),z=S.length,ye=v.length,R=new Re(Ye),Z=R.d=[],m=0;S[m]==(v[m]||0);m++);if(S[m]>(v[m]||0)&&l--,o==null?(ne=o=Re.precision,s=Re.rounding):a?ne=o+(i.e-r.e)+1:ne=o,ne<0)Z.push(1),h=!0;else{if(ne=ne/b+2|0,m=0,z==1){for(d=0,S=S[0],ne++;(m<ye||d)&&ne--;m++)je=d*u+(v[m]||0),Z[m]=je/S|0,d=je%S|0;h=d||m<ye}else{for(d=u/(S[0]+1)|0,d>1&&(S=e(S,d,u),v=e(v,d,u),z=S.length,ye=v.length),Ne=z,x=v.slice(0,z),E=x.length;E<z;)x[E++]=0;Le=S.slice(),Le.unshift(0),Qe=S[0],S[1]>=u/2&&++Qe;do d=0,c=t(S,x,z,E),c<0?(Ke=x[0],z!=E&&(Ke=Ke*u+(x[1]||0)),d=Ke/Qe|0,d>1?(d>=u&&(d=u-1),T=e(S,d,u),_=T.length,E=x.length,c=t(T,x,_,E),c==1&&(d--,n(T,z<_?Le:S,_,u))):(d==0&&(c=d=1),T=S.slice()),_=T.length,_<E&&T.unshift(0),n(x,T,E,u),c==-1&&(E=x.length,c=t(S,x,z,E),c<1&&(d++,n(x,z<E?Le:S,E,u))),E=x.length):c===0&&(d++,x=[0]),Z[m++]=d,c&&x[0]?x[E++]=v[Ne]||0:(x=[v[Ne]],E=1);while((Ne++<ye||x[0]!==void 0)&&ne--);h=x[0]!==void 0}Z[0]||Z.shift()}if(b==1)R.e=l,Lt=h;else{for(m=1,d=Z[0];d>=10;d/=10)m++;R.e=m+l*b-1,f(R,a?o+R.e+1:o,s,h)}return R}}();function f(e,t,n,i){var r,o,s,a,u,c,l,m,d,b=e.constructor;e:if(t!=null){if(m=e.d,!m)return e;for(r=1,a=m[0];a>=10;a/=10)r++;if(o=t-r,o<0)o+=y,s=t,l=m[d=0],u=l/M(10,r-s-1)%10|0;else if(d=Math.ceil((o+1)/y),a=m.length,d>=a)if(i){for(;a++<=d;)m.push(0);l=u=0,r=1,o%=y,s=o-y+1}else break e;else{for(l=a=m[d],r=1;a>=10;a/=10)r++;o%=y,s=o-y+r,u=s<0?0:l/M(10,r-s-1)%10|0}if(i=i||t<0||m[d+1]!==void 0||(s<0?l:l%M(10,r-s-1)),c=n<4?(u||i)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||i||n==6&&(o>0?s>0?l/M(10,r-s):0:m[d-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,c?(t-=e.e+1,m[0]=M(10,(y-t%y)%y),e.e=-t||0):m[0]=e.e=0,e;if(o==0?(m.length=d,a=1,d--):(m.length=d+1,a=M(10,y-o),m[d]=s>0?(l/M(10,r-s)%M(10,s)|0)*a:0),c)for(;;)if(d==0){for(o=1,s=m[0];s>=10;s/=10)o++;for(s=m[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,m[0]==Y&&(m[0]=1));break}else{if(m[d]+=a,m[d]!=Y)break;m[d--]=0,a=1}for(o=m.length;m[--o]===0;)m.pop()}return A&&(e.e>b.maxE?(e.d=null,e.e=NaN):e.e<b.minE&&(e.e=0,e.d=[0])),e}function $(e,t,n){if(!e.isFinite())return Vt(e);var i,r=e.e,o=O(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+se(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+se(-r-1)+o,n&&(i=n-s)>0&&(o+=se(i))):r>=s?(o+=se(r+1-s),n&&(i=n-r-1)>0&&(o=o+"."+se(i))):((i=r+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(o+="."),o+=se(i))),o}function De(e,t){var n=e[0];for(t*=y;n>=10;n/=10)t++;return t}function Ee(e,t,n){if(t>Ln)throw A=!0,n&&(e.precision=n),Error(Rt);return f(new e(Fe),t,1,!0)}function Q(e,t,n){if(t>et)throw Error(Rt);return f(new e(Oe),t,n,!0)}function Et(e){var t=e.length-1,n=t*y+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function se(e){for(var t="";e--;)t+="0";return t}function vt(e,t,n,i){var r,o=new e(1),s=Math.ceil(i/y+4);for(A=!1;;){if(n%2&&(o=o.times(t),Kt(o.d,s)&&(r=!0)),n=D(n/2),n===0){n=o.d.length-1,r&&o.d[n]===0&&++o.d[n];break}t=t.times(t),Kt(t.d,s)}return A=!0,o}function Ct(e){return e.d[e.d.length-1]&1}function Dt(e,t,n){for(var i,r=new e(t[0]),o=0;++o<t.length;)if(i=new e(t[o]),i.s)r[n](i)&&(r=i);else{r=i;break}return r}function tt(e,t){var n,i,r,o,s,a,u,c=0,l=0,m=0,d=e.constructor,b=d.rounding,h=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(A=!1,u=h):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),m+=5;for(i=Math.log(M(2,m))/Math.LN10*2+5|0,u+=i,n=o=s=new d(1),d.precision=u;;){if(o=f(o.times(e),u,1),n=n.times(++l),a=s.plus(I(o,n,u,1)),O(a.d).slice(0,u)===O(s.d).slice(0,u)){for(r=m;r--;)s=f(s.times(s),u,1);if(t==null)if(c<3&&we(s.d,u-i,b,c))d.precision=u+=10,n=o=a=new d(1),l=0,c++;else return f(s,d.precision=h,b,A=!0);else return d.precision=h,s}s=a}}function ae(e,t){var n,i,r,o,s,a,u,c,l,m,d,b=1,h=10,T=e,_=T.d,R=T.constructor,Z=R.rounding,x=R.precision;if(T.s<0||!_||!_[0]||!T.e&&_[0]==1&&_.length==1)return new R(_&&!_[0]?-1/0:T.s!=1?NaN:_?0:T);if(t==null?(A=!1,l=x):l=t,R.precision=l+=h,n=O(_),i=n.charAt(0),Math.abs(o=T.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)T=T.times(e),n=O(T.d),i=n.charAt(0),b++;o=T.e,i>1?(T=new R("0."+n),o++):T=new R(i+"."+n.slice(1))}else return c=Ee(R,l+2,x).times(o+""),T=ae(new R(i+"."+n.slice(1)),l-h).plus(c),R.precision=x,t==null?f(T,x,Z,A=!0):T;for(m=T,u=s=T=I(T.minus(1),T.plus(1),l,1),d=f(T.times(T),l,1),r=3;;){if(s=f(s.times(d),l,1),c=u.plus(I(s,new R(r),l,1)),O(c.d).slice(0,l)===O(u.d).slice(0,l))if(u=u.times(2),o!==0&&(u=u.plus(Ee(R,l+2,x).times(o+""))),u=I(u,new R(b),l,1),t==null)if(we(u.d,l-h,Z,a))R.precision=l+=h,c=s=T=I(m.minus(1),m.plus(1),l,1),d=f(T.times(T),l,1),r=a=1;else return f(u,R.precision=x,Z,A=!0);else return R.precision=x,u;u=c,r+=2}}function Vt(e){return String(e.s*e.s/0)}function nt(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charCodeAt(i)===48;i++);for(r=t.length;t.charCodeAt(r-1)===48;--r);if(t=t.slice(i,r),t){if(r-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%y,n<0&&(i+=y),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=y;i<r;)e.d.push(+t.slice(i,i+=y));t=t.slice(i),i=y-t.length}else i-=r;for(;i--;)t+="0";e.d.push(+t),A&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Mn(e,t){var n,i,r,o,s,a,u,c,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Ot.test(t))return nt(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Cn.test(t))n=16,t=t.toLowerCase();else if(Sn.test(t))n=2;else if(Kn.test(t))n=8;else throw Error(ce+t);for(o=t.search(/p/i),o>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,i=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,r=vt(i,new i(n),o,o*2)),c=Me(t,n,Y),l=c.length-1,o=l;c[o]===0;--o)c.pop();return o<0?new i(e.s*0):(e.e=De(c,l),e.d=c,A=!1,s&&(e=I(e,r,a*4)),u&&(e=e.times(Math.abs(u)<54?M(2,u):Pe.pow(2,u))),A=!0,e)}function Fn(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:pe(e,2,t,t);n=1.4*Math.sqrt(i),n=n>16?16:n|0,t=t.times(1/Ve(5,n)),t=pe(e,2,t,t);for(var r,o=new e(5),s=new e(16),a=new e(20);n--;)r=t.times(t),t=t.times(o.plus(r.times(s.times(r).minus(a))));return t}function pe(e,t,n,i,r){var o,s,a,u,c=1,l=e.precision,m=Math.ceil(l/y);for(A=!1,u=n.times(n),a=new e(i);;){if(s=I(a.times(u),new e(t++*t++),l,1),a=r?i.plus(s):i.minus(s),i=I(s.times(u),new e(t++*t++),l,1),s=a.plus(i),s.d[m]!==void 0){for(o=m;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=i,i=s,s=o,c++}return A=!0,s.d.length=m+1,s}function Ve(e,t){for(var n=e;--t;)n*=e;return n}function _t(e,t){var n,i=t.s<0,r=Q(e,e.precision,1),o=r.times(.5);if(t=t.abs(),t.lte(o))return ie=i?4:1,t;if(n=t.divToInt(r),n.isZero())ie=i?3:2;else{if(t=t.minus(n.times(r)),t.lte(o))return ie=Ct(n)?i?2:3:i?4:1,t;ie=Ct(n)?i?1:4:i?3:2}return t.minus(r).abs()}function it(e,t,n,i){var r,o,s,a,u,c,l,m,d,b=e.constructor,h=n!==void 0;if(h?(G(n,1,ue),i===void 0?i=b.rounding:G(i,0,8)):(n=b.precision,i=b.rounding),!e.isFinite())l=Vt(e);else{for(l=$(e),s=l.indexOf("."),h?(r=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):r=t,s>=0&&(l=l.replace(".",""),d=new b(1),d.e=l.length-s,d.d=Me($(d),10,r),d.e=d.d.length),m=Me(l,10,r),o=u=m.length;m[--u]==0;)m.pop();if(!m[0])l=h?"0p+0":"0";else{if(s<0?o--:(e=new b(e),e.d=m,e.e=o,e=I(e,d,n,i,0,r),m=e.d,o=e.e,c=Lt),s=m[n],a=r/2,c=c||m[n+1]!==void 0,c=i<4?(s!==void 0||c)&&(i===0||i===(e.s<0?3:2)):s>a||s===a&&(i===4||c||i===6&&m[n-1]&1||i===(e.s<0?8:7)),m.length=n,c)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(u=m.length;!m[u-1];--u);for(s=0,l="";s<u;s++)l+=Je.charAt(m[s]);if(h){if(u>1)if(t==16||t==8){for(s=t==16?4:3,--u;u%s;u++)l+="0";for(m=Me(l,r,t),u=m.length;!m[u-1];--u);for(s=1,l="1.";s<u;s++)l+=Je.charAt(m[s])}else l=l.charAt(0)+"."+l.slice(1);l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o))}l=(t==16?"0x":t==2?"0b":t==8?"0o":"")+l}return e.s<0?"-"+l:l}function Kt(e,t){if(e.length>t)return e.length=t,!0}function On(e){return new this(e).abs()}function En(e){return new this(e).acos()}function vn(e){return new this(e).acosh()}function Dn(e,t){return new this(e).plus(t)}function Vn(e){return new this(e).asin()}function _n(e){return new this(e).asinh()}function Wn(e){return new this(e).atan()}function qn(e){return new this(e).atanh()}function Gn(e,t){e=new this(e),t=new this(t);var n,i=this.precision,r=this.rounding,o=i+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Q(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Q(this,i,r):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Q(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(I(e,t,o,1)),t=Q(this,o,1),this.precision=i,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(I(e,t,o,1)),n}function Un(e){return new this(e).cbrt()}function Xn(e){return f(e=new this(e),e.e+1,2)}function Hn(e,t,n){return new this(e).clamp(t,n)}function Zn(e){if(!e||typeof e!="object")throw Error(ve+"Object expected");var t,n,i,r=e.defaults===!0,o=["precision",1,ue,"rounding",0,8,"toExpNeg",-de,0,"toExpPos",0,de,"maxE",0,de,"minE",-de,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],r&&(this[n]=$e[n]),(i=e[n])!==void 0)if(D(i)===i&&i>=o[t+1]&&i<=o[t+2])this[n]=i;else throw Error(ce+n+": "+i);if(n="crypto",r&&(this[n]=$e[n]),(i=e[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Mt);else this[n]=!1;else throw Error(ce+n+": "+i);return this}function zn(e){return new this(e).cos()}function jn(e){return new this(e).cosh()}function Wt(e){var t,n,i;function r(o){var s,a,u,c=this;if(!(c instanceof r))return new r(o);if(c.constructor=r,Nt(o)){c.s=o.s,A?!o.d||o.e>r.maxE?(c.e=NaN,c.d=null):o.e<r.minE?(c.e=0,c.d=[0]):(c.e=o.e,c.d=o.d.slice()):(c.e=o.e,c.d=o.d?o.d.slice():o.d);return}if(u=typeof o,u==="number"){if(o===0){c.s=1/o<0?-1:1,c.e=0,c.d=[0];return}if(o<0?(o=-o,c.s=-1):c.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;A?s>r.maxE?(c.e=NaN,c.d=null):s<r.minE?(c.e=0,c.d=[0]):(c.e=s,c.d=[o]):(c.e=s,c.d=[o]);return}else if(o*0!==0){o||(c.s=NaN),c.e=NaN,c.d=null;return}return nt(c,o.toString())}else if(u!=="string")throw Error(ce+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),c.s=-1):(a===43&&(o=o.slice(1)),c.s=1),Ot.test(o)?nt(c,o):Mn(c,o)}if(r.prototype=p,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=Zn,r.clone=Wt,r.isDecimal=Nt,r.abs=On,r.acos=En,r.acosh=vn,r.add=Dn,r.asin=Vn,r.asinh=_n,r.atan=Wn,r.atanh=qn,r.atan2=Gn,r.cbrt=Un,r.ceil=Xn,r.clamp=Hn,r.cos=zn,r.cosh=jn,r.div=Qn,r.exp=Yn,r.floor=Jn,r.hypot=$n,r.ln=ei,r.log=ti,r.log10=ii,r.log2=ni,r.max=ri,r.min=oi,r.mod=si,r.mul=ai,r.pow=ci,r.random=ui,r.round=li,r.sign=mi,r.sin=di,r.sinh=pi,r.sqrt=fi,r.sub=bi,r.sum=gi,r.tan=yi,r.tanh=wi,r.trunc=Pi,e===void 0&&(e={}),e&&e.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return r.config(e),r}function Qn(e,t){return new this(e).div(t)}function Yn(e){return new this(e).exp()}function Jn(e){return f(e=new this(e),e.e+1,3)}function $n(){var e,t,n=new this(0);for(A=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return A=!0,new this(1/0);n=t}return A=!0,n.sqrt()}function Nt(e){return e instanceof Pe||e&&e.toStringTag===Ft||!1}function ei(e){return new this(e).ln()}function ti(e,t){return new this(e).log(t)}function ni(e){return new this(e).log(2)}function ii(e){return new this(e).log(10)}function ri(){return Dt(this,arguments,"lt")}function oi(){return Dt(this,arguments,"gt")}function si(e,t){return new this(e).mod(t)}function ai(e,t){return new this(e).mul(t)}function ci(e,t){return new this(e).pow(t)}function ui(e){var t,n,i,r,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:G(e,1,ue),i=Math.ceil(e/y),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));o<i;)r=t[o],r>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=r%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(i*=4);o<i;)r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(r%1e7),o+=4);o=i/4}else throw Error(Mt);else for(;o<i;)a[o++]=Math.random()*1e7|0;for(i=a[--o],e%=y,i&&e&&(r=M(10,y-e),a[o]=(i/r|0)*r);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=y)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<y&&(n-=y-i)}return s.e=n,s.d=a,s}function li(e){return f(e=new this(e),e.e+1,this.rounding)}function mi(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function di(e){return new this(e).sin()}function pi(e){return new this(e).sinh()}function fi(e){return new this(e).sqrt()}function bi(e,t){return new this(e).sub(t)}function gi(){var e=0,t=arguments,n=new this(t[e]);for(A=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return A=!0,f(n,this.precision,this.rounding)}function yi(e){return new this(e).tan()}function wi(e){return new this(e).tanh()}function Pi(e){return f(e=new this(e),e.e+1,1)}p[Symbol.for("nodejs.util.inspect.custom")]=p.toString;p[Symbol.toStringTag]="Decimal";var Pe=p.constructor=Wt($e);Fe=new Pe(Fe);Oe=new Pe(Oe);var F=Pe;import{PublicKey as Zd}from"@solana/web3.js";import jd from"bn.js";import{PublicKey as Nr}from"@solana/web3.js";import{get as qt,set as Ai}from"lodash";var rt=class{constructor(t){this.logLevel=t.logLevel!==void 0?t.logLevel:0,this.name=t.name}set level(t){this.logLevel=t}get time(){return Date.now().toString()}get moduleName(){return this.name}isLogLevel(t){return t<=this.logLevel}error(...t){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...t),this):this}logWithError(...t){let n=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)}warning(...t){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...t),this):this}info(...t){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...t),this):this}debug(...t){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...t),this):this}},Gt={},Ti={};function W(e){let t=qt(Gt,e);if(!t){let n=qt(Ti,e);t=new rt({name:e,logLevel:n}),Ai(Gt,e,t)}return t}import{MINT_SIZE as Fr,TOKEN_PROGRAM_ID as Or,getTransferFeeConfig as Er,unpackMint as vr}from"@solana/spl-token";var Dr=W("Raydium_accountInfo_util");import re from"bn.js";import Ki from"big.js";import no from"bn.js";import ki from"toformat";var hi=ki,Ae=hi;import qe from"big.js";import xi from"bn.js";import Ii from"decimal.js-light";import Te from"bn.js";var Xt=9007199254740991;function ee(e){let t=W("Raydium_parseBigNumberish");if(e instanceof Te)return e;if(typeof e=="string"){if(e.match(/^-?[0-9]+$/))return new Te(e);t.logWithError(`invalid BigNumberish string: ${e}`)}return typeof e=="number"?(e%1&&t.logWithError(`BigNumberish number underflow: ${e}`),(e>=Xt||e<=-Xt)&&t.logWithError(`BigNumberish number overflow: ${e}`),new Te(String(e))):typeof e=="bigint"?new Te(e.toString()):(t.error(`invalid BigNumberish value: ${e}`),new Te(0))}var We=W("module/fraction"),ot=Ae(qe),ke=Ae(Ii),Si={[0]:ke.ROUND_DOWN,[1]:ke.ROUND_HALF_UP,[2]:ke.ROUND_UP},Ci={[0]:qe.roundDown,[1]:qe.roundHalfUp,[2]:qe.roundUp},C=class{constructor(t,n=new xi(1)){this.numerator=ee(t),this.denominator=ee(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new C(this.denominator,this.numerator)}add(t){let n=t instanceof C?t:new C(ee(t));return this.denominator.eq(n.denominator)?new C(this.numerator.add(n.numerator),this.denominator):new C(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(t){let n=t instanceof C?t:new C(ee(t));return this.denominator.eq(n.denominator)?new C(this.numerator.sub(n.numerator),this.denominator):new C(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(t){let n=t instanceof C?t:new C(ee(t));return new C(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(t){let n=t instanceof C?t:new C(ee(t));return new C(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(t,n={groupSeparator:""},i=1){Number.isInteger(t)||We.logWithError(`${t} is not an integer.`),t<=0&&We.logWithError(`${t} is not positive.`),ke.set({precision:t+1,rounding:Si[i]});let r=new ke(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return r.toFormat(r.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},i=1){return Number.isInteger(t)||We.logWithError(`${t} is not an integer.`),t<0&&We.logWithError(`${t} is negative.`),ot.DP=t,ot.RM=Ci[i]||1,new ot(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}isZero(){return this.numerator.isZero()}};var mo=W("Raydium_amount"),po=Ae(Ki);import{PublicKey as Li}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ht}from"@solana/spl-token";var st={chainId:101,address:Li.default.toBase58(),programId:Ht.toBase58(),decimals:9,symbol:"SOL",name:"solana",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}},le={chainId:101,address:"So11111111111111111111111111111111111111112",programId:Ht.toBase58(),decimals:9,symbol:"WSOL",name:"Wrapped SOL",logoURI:"https://img-v1.raydium.io/icon/So11111111111111111111111111111111111111112.png",tags:[],priority:2,type:"raydium",extensions:{coingeckoId:"solana"}};import{PublicKey as ct}from"@solana/web3.js";import{PublicKey as K,SystemProgram as Zt,SYSVAR_RENT_PUBKEY as Ri}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Mi}from"@solana/spl-token";function at({pubkey:e,isSigner:t=!1,isWritable:n=!0}){return{pubkey:e,isWritable:n,isSigner:t}}var To=[at({pubkey:Mi,isWritable:!1}),at({pubkey:Zt.programId,isWritable:!1}),at({pubkey:Ri,isWritable:!1})];function zt({publicKey:e,transformSol:t}){let n=jt(e.toString());if(n instanceof K)return t&&n.equals(he)?_e:n;if(t&&n.toString()===he.toBase58())return _e;if(typeof n=="string"){if(n===K.default.toBase58())return K.default;try{return new K(n)}catch{throw new Error("invalid public key")}}throw new Error("invalid public key")}function jt(e){try{return new K(e)}catch{return e}}var Fi=new K("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Oi=new K("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),Ei=new K("SysvarRent111111111111111111111111111111111"),ko=new K("SysvarC1ock11111111111111111111111111111111"),Qt=new K("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),ho=new K("Sysvar1nstructions1111111111111111111111111"),Bo=Zt.programId,xo=new K("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Io=new K("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),So=new K("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Co=new K("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ko=new K("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),No=new K("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Lo=new K("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ro=new K("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Mo=new K("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Fo=new K("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Oo=new K("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),_e=new K("So11111111111111111111111111111111111111112"),he=K.default;var ut=class{constructor({mint:t,decimals:n,symbol:i,name:r,skipMint:o=!1,isToken2022:s=!1}){if(t===he.toBase58()||t instanceof ct&&he.equals(t)){this.decimals=le.decimals,this.symbol=le.symbol,this.name=le.name,this.mint=new ct(le.address),this.isToken2022=!1;return}this.decimals=n,this.symbol=i||t.toString().substring(0,6),this.name=r||t.toString().substring(0,6),this.mint=o?ct.default:zt({publicKey:t}),this.isToken2022=s}equals(t){return this===t?!0:this.mint.equals(t.mint)}},me=ut;me.WSOL=new ut(J(j({},le),{mint:le.address}));var lt=class{constructor({decimals:t,symbol:n="UNKNOWN",name:i="UNKNOWN"}){this.decimals=t,this.symbol=n,this.name=i}equals(t){return this===t}},Ge=lt;Ge.SOL=new lt(st);import vi from"bn.js";var Zo=new C(new vi(100));var $o=W("Raydium_price");import{PublicKey as gs}from"@solana/web3.js";import ws from"bn.js";var Di=new re(0),Es=new re(1),vs=new re(2),Ds=new re(3),Vs=new re(5),Ni=new re(10),_s=new re(100),Ws=new re(1e3),qs=new re(1e4);import{PublicKey as pa}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ba}from"@solana/spl-token";import{ComputeBudgetProgram as Qs,Keypair as $s,PublicKey as ea,Transaction as na,TransactionMessage as ra,VersionedTransaction as oa}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as ua}from"@solana/spl-token";var la=W("Raydium_txUtil");import{PublicKey as g}from"@solana/web3.js";var Pa=new g("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Aa=new g("CBuCnLe26faBpcBP2fktp4rp8abpcAnTWft6ZrP5Q4T"),Ta=new g("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),ka=new g("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),ha=new g("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Ba=new g("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),xa=new g("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Ia=new g("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),Sa=new g("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Ca=new g("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),_i=new g("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Wi=new g("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),qi=new g("kN1kEznaF5Xbd8LYuqtEFcxzWSBk5Fv6ygX6SqEGJVy"),Ka=new g("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Na=new g("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),La=new g("7YttLkHDoNj9wyDur5pM1ejNaAvT9X4eqaYcHQqtj2G5"),Ra=new g("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),Ma=new g("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Fa=new g("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),Oa=new g("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),Ea=new g("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),va=new g("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),Da=new g("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),Va=new g("LockrWmn6K5twhz3y9w1dQERbmgSaRkfnTeTKbpofwE"),_a=new g("3f7GcQFG397GAaEnv51zR6tsTVihYRydnydDD1cXekxH"),Wa=new g("LanMV9sAd7wArD4vJFi2qDdfnVhFxYSUg6eADduJ3uj"),qa=new g("WLHv2UAZm6z4KyaaELi5pjdbJh6RESMva1Rnn8pJVVh"),Ga=new g("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),Ua=new g("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),Xa=new g("4Bu96XjU84XjPDSpveTVf6LYGCkfW5FK7SNkREWcEfV4"),Ha=new g("6s1xP3hpbAfFoNtUNF8mfHsjr2Bd97JxFJRWLbL6aHuX");var Za={OPEN_BOOK_PROGRAM:new g("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),SERUM_PROGRAM_ID_V3:new g("Ray1111111111111111111111111111111111111111"),AMM_V4:new g("DRaya7Kj3aMWQSy19kSjvmuwq9docCHofyP9kanQGaav"),AMM_STABLE:new g("DRayDdXc1NZQ9C3hRWmoSf8zK4iapgMnjdNZWrfwsP8m"),CLMM_PROGRAM_ID:new g("DRayAUgENGQBKVaX8owNhgzkEDyoHTGVEGHVJT1E9pfH"),CLMM_LOCK_PROGRAM_ID:new g("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),CLMM_LOCK_AUTH_ID:new g("6Aoh8h2Lw2m5UGxYR8AdAL87jTWYeKoxM52mJRzfYwN"),CREATE_CPMM_POOL_PROGRAM:new g("DRaycpLY18LhpbydsBWbVJtxpNv9oXPgjRSfpF2bWpYb"),CREATE_CPMM_POOL_AUTH:new g("CXniRufdq5xL8t8jZAPxsPZDpuudwuJSPWnbcD5Y5Nxq"),CREATE_CPMM_POOL_FEE_ACC:new g("3oE58BKVt8KuYkGxx8zBojugnymWmBiyafWgMrnb6eYy"),LOCK_CPMM_PROGRAM:new g("DRay25Usp3YJAi7beckgpGUC7mGJ2cR1AVPxhYfwVCUX"),LOCK_CPMM_AUTH:new g("7qWVV8UY2bRJfDLP4s37YzBPKUkVB46DStYJBpYbQzu3"),UTIL1216:g.default,Router:new g("DRaybByLpbUL57LJARs3j8BitTxVfzBg351EaMr5UTCd"),FARM_PROGRAM_ID_V3:new g("DRayWyrLmEW5KEeqs8kdTMMaBabapqagaBC7KWpGtJeZ"),FARM_PROGRAM_ID_V4:new g("Ray1111111111111111111111111111111111111111"),FARM_PROGRAM_ID_V5:new g("DRayiCGSZgku1GTK6rXD6mVDdingXy6APAH1R6R5L2LC"),FARM_PROGRAM_ID_V6:new g("DRayzbYakXs45ELHkzH6vC3fuhQqTAnv5A68gdFuvZyZ"),LAUNCHPAD_PROGRAM:new g("DRay6fNdQ5J82H7xV6uq2aV3mNrUZ1J4PgSKsWgptcm6"),LAUNCHPAD_AUTH:new g("5xqNaZXX5eUi4p5HU4oz9i5QnwRNT2y6oN7yyn4qENeq"),LAUNCHPAD_PLATFORM:new g("2Jx4KTDrVSdWNazuGpcA8n3ZLTRGGBDxAWhuKe2Xcj2a"),LAUNCHPAD_CONFIG:new g("7ZR4zD7PYfY2XxoG1Gxcy2EgEeGYrpxrwzPuwdUBssEt"),FEE_DESTINATION_ID:new g("9y8ENuuZ3b19quffx9hQvRVygG5ky6snHfRvGpuSfeJy"),MODEL_DATA_PUBKEY:new g("Ray1111111111111111111111111111111111111111")};import Xe from"bn.js";function ft(e,t){if(e.isZero())return new Xe(0);let n=e.div(t);return n.isZero()?new Xe(1):e.mod(t).gt(new Xe(0))?n.add(new Xe(1)):n}import{PublicKey as Gi,AddressLookupTableAccount as Yt}from"@solana/web3.js";var Ui={AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU:new Yt({key:new Gi("AcL1Vo8oy1ULiavEcjSUcwfBSForXMudcZvDZy5nzJkU"),state:Yt.deserialize(Buffer.from("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","base64"))})};import{PublicKey as dc,sendAndConfirmTransaction as pc,SystemProgram as gc,Transaction as yc,TransactionMessage as Pc,VersionedTransaction as Ac}from"@solana/web3.js";import kc from"axios";import Zi from"bn.js";var Kc=new Zi(1e6);import{AccountLayout as $d,createAssociatedTokenAccountIdempotentInstruction as ep,TOKEN_2022_PROGRAM_ID as tp,TOKEN_PROGRAM_ID as np}from"@solana/spl-token";import{PublicKey as Jc}from"@solana/web3.js";import{MintLayout as eu,TOKEN_PROGRAM_ID as nu}from"@solana/spl-token";import{Keypair as gd,PublicKey as yd,SystemProgram as Pd,TransactionInstruction as Ad}from"@solana/web3.js";import kd from"bn.js";import{ASSOCIATED_TOKEN_PROGRAM_ID as xd,TOKEN_2022_PROGRAM_ID as Id,TOKEN_PROGRAM_ID as Sd}from"@solana/spl-token";import{PublicKey as nr}from"@solana/web3.js";import nn,{isBN as rn}from"bn.js";import{bits as fu,BitStructure as bu,blob as zi,Blob as gu,cstr as yu,f32 as wu,f32be as Pu,f64 as Au,f64be as Tu,greedy as ku,Layout as ji,ns64 as hu,ns64be as Bu,nu64 as xu,nu64be as Iu,offset as Su,s16 as Cu,s16be as Ku,s24 as Nu,s24be as Lu,s32 as Qi,s32be as Ru,s40 as Mu,s40be as Fu,s48 as Ou,s48be as Eu,s8 as vu,seq as Yi,struct as Du,Structure as Ji,u16 as $i,u16be as Vu,u24 as _u,u24be as Wu,u32 as qu,u32be as Gu,u40 as Uu,u40be as Xu,u48 as Hu,u48be as Zu,u8 as er,UInt as tr,union as zu,Union as ju,unionLayoutDiscriminator as Qu,utf8 as Yu}from"@solana/buffer-layout";var bt=ji,$t=Ji;var gt=tr;var en=er,Be=$i;var oe=Qi;var tn=Yi;var X=zi;var fe=class extends bt{constructor(n,i,r){super(n,r);this.blob=X(n),this.signed=i}decode(n,i=0){let r=new nn(this.blob.decode(n,i),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(n,i,r=0){return typeof n=="number"&&(n=new nn(n)),this.signed&&(n=n.toTwos(this.span*8)),this.blob.encode(n.toArrayLike(Buffer,"le",this.span),i,r)}};function q(e){return new gt(1,e)}function be(e){return new gt(4,e)}function k(e){return new fe(8,!1,e)}function N(e){return new fe(16,!1,e)}function on(e){return new fe(8,!0,e)}function sn(e){return new fe(16,!0,e)}var He=class extends bt{constructor(n,i,r,o){super(n.span,o);this.layout=n,this.decoder=i,this.encoder=r}decode(n,i){return this.decoder(this.layout.decode(n,i))}encode(n,i,r){return this.layout.encode(this.encoder(n),i,r)}getSpan(n,i){return this.layout.getSpan(n,i)}};function B(e){return new He(X(32),t=>new nr(t),t=>t.toBuffer(),e)}function wt(e){return new He(en(),ir,rr,e)}function ir(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function rr(e){return e?1:0}var yt=class extends $t{decode(t,n){return super.decode(t,n)}};function V(e,t,n){return new yt(e,t,n)}function L(e,t,n){let i,r=typeof t=="number"?t:rn(t)?t.toNumber():new Proxy(t,{get(o,s){if(!i){let a=Reflect.get(o,"count");i=rn(a)?a.toNumber():a,Reflect.set(o,"count",i)}return Reflect.get(o,s)},set(o,s,a){return s==="count"&&(i=a),Reflect.set(o,s,a)}});return tn(e,r,n)}import jm from"bn.js";import H from"bn.js";var Pt=new H(0),an=new H(1),cn=new H(-1),te=new H(1).shln(64),un=new H(1).shln(128),At=te.sub(an);var or=un.subn(1),ge=-443636,xe=-ge,Tt=new H("4295048016"),kt=new H("79226673521066979257578248091"),ml=new H("4295048017"),dl=new H("79226673521066979257578248090");var sr=new H(10).pow(new H(6));var pl=new H("18446744073700000000");import Om from"bn.js";var Al=Buffer.from("amm_config","utf8"),Tl=Buffer.from("pool","utf8"),kl=Buffer.from("pool_vault","utf8"),hl=Buffer.from("pool_reward_vault","utf8"),Bl=Buffer.from("position","utf8"),xl=Buffer.from("tick_array","utf8"),Il=Buffer.from("operation","utf8"),Sl=Buffer.from("pool_tick_array_bitmap_extension","utf8"),Cl=Buffer.from("observation","utf8");var Kl=Buffer.from("locked_position","utf8");var Nl=Buffer.from("support_mint","utf8");import{PublicKey as um}from"@solana/web3.js";import{TOKEN_2022_PROGRAM_ID as mm}from"@solana/spl-token";import pm from"bn.js";import Ml from"bn.js";var xt=14;var Ze=60;var mr=V([X(8),q("bump"),Be("index"),B(""),be("protocolFeeRate"),be("tradeFeeRate"),Be("tickSpacing"),L(k(),8,"")]),dr=V([be("blockTimestamp"),on("tickCumulative"),L(k(),4)]),Pn=V([X(8),wt("initialized"),k("recentEpoch"),Be("observationIndex"),B("poolId"),L(dr,100,"observations"),L(k(),4)]),pr=V([q("rewardState"),k("openTime"),k("endTime"),k("lastUpdateTime"),N("emissionsPerSecondX64"),k("rewardTotalEmissioned"),k("rewardClaimed"),B("tokenMint"),B("tokenVault"),B("creator"),N("rewardGrowthGlobalX64")]),gn=V([X(8),q("bump"),B("ammConfig"),B("creator"),B("mintA"),B("mintB"),B("vaultA"),B("vaultB"),B("observationId"),q("mintDecimalsA"),q("mintDecimalsB"),Be("tickSpacing"),N("liquidity"),N("sqrtPriceX64"),oe("tickCurrent"),be(),N("feeGrowthGlobalX64A"),N("feeGrowthGlobalX64B"),k("protocolFeesTokenA"),k("protocolFeesTokenB"),N("swapInAmountTokenA"),N("swapOutAmountTokenB"),N("swapInAmountTokenB"),N("swapOutAmountTokenA"),q("status"),L(q(),7,""),L(pr,3,"rewardInfos"),L(k(),16,"tickArrayBitmap"),k("totalFeesTokenA"),k("totalFeesClaimedTokenA"),k("totalFeesTokenB"),k("totalFeesClaimedTokenB"),k("fundFeesTokenA"),k("fundFeesTokenB"),k("startTime"),L(k(),15*4-3,"padding")]),fr=V([N("growthInsideLastX64"),k("rewardAmountOwed")]),yn=V([X(8),q("bump"),B("nftMint"),B("poolId"),oe("tickLower"),oe("tickUpper"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),k("tokenFeesOwedA"),k("tokenFeesOwedB"),L(fr,3,"rewardInfos"),L(k(),8,"")]),od=V([X(8),q("bump"),B("poolId"),oe("tickLowerIndex"),oe("tickUpperIndex"),N("liquidity"),N("feeGrowthInsideLastX64A"),N("feeGrowthInsideLastX64B"),k("tokenFeesOwedA"),k("tokenFeesOwedB"),L(N(),3,"rewardGrowthInside"),L(k(),8,"")]),br=V([oe("tick"),sn("liquidityNet"),N("liquidityGross"),N("feeGrowthOutsideX64A"),N("feeGrowthOutsideX64B"),L(N(),3,"rewardGrowthsOutsideX64"),L(be(),13,"")]),pn=V([X(8),B("poolId"),oe("startTickIndex"),L(br,Ze,"ticks"),q("initializedTickCount"),L(q(),115,"")]),gr=V([X(329),L(B(),100,"whitelistMints")]),lr=V([X(8),B("poolId"),L(L(k(),8),xt,"positiveTickArrayBitmap"),L(L(k(),8),xt,"negativeTickArrayBitmap")]),sd=V([k(),q("bump"),B("owner"),B("poolId"),B("positionId"),B("nftAccount"),L(k(),8)]),yr=V([X(8),q("bump"),B("lockOwner"),B("poolId"),B("positionId"),B("nftAccount"),B("lockNftMint"),k("recentEpoch"),L(k(),8)]);Pn.span;var Ed=W("Raydium_Clmm");var ze=class{static getPoolInitPriceByPool({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getPoolInitPriceByInit({a:t,b:n,decimalA:i,decimalB:r}){throw Error()}static getPoolPrice({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getPoolEndPrice({supply:t,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){throw Error()}static getPoolEndPriceReal({poolInfo:t,decimalA:n,decimalB:i}){throw Error()}static getInitParam({supply:t,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){throw Error()}static buyExactIn({poolInfo:t,amount:n}){throw Error()}static buyExactOut({poolInfo:t,amount:n}){throw Error()}static sellExactIn({poolInfo:t,amount:n}){throw Error()}static sellExactOut({poolInfo:t,amount:n}){throw Error()}};import An from"bn.js";var Ce=class{static _multipler(t){return new F(10).pow(t)}static getPrice({priceX64:t,decimalA:n,decimalB:i}){return new F(t.toString()).div(this._Q64).mul(this._multipler(n)).div(this._multipler(i))}static getPriceX64({price:t,decimalA:n,decimalB:i}){let r=t.mul(this._multipler(i)).div(this._multipler(n));return new An(r.mul(this._Q64).toFixed(0))}};Ce._Q64=new F(new An(1).shln(64).toString());var Tn=class extends ze{static getPoolInitPriceByPool({poolInfo:t,decimalA:n,decimalB:i}){return new F(0)}static getPoolInitPriceByInit({a:t,b:n,decimalA:i,decimalB:r}){return new F(0)}static getPoolPrice({poolInfo:t,decimalA:n,decimalB:i}){return new F(t.virtualA.mul(t.realA).toString()).div(Ce._Q64).mul(10**(n-i))}static getPoolEndPrice({supply:t,totalSell:n,totalLockedAmount:i,totalFundRaising:r,migrateFee:o,decimalA:s,decimalB:a}){return new F(r.sub(o).toString()).div(t.sub(n).sub(i).toString()).mul(10**(s-a))}static getPoolEndPriceReal({poolInfo:t,decimalA:n,decimalB:i}){let r=t.totalSellA.sub(t.realA),o=t.totalFundRaisingB.sub(t.realB);return new F(t.virtualB.add(t.realB).add(o).toString()).div(t.virtualA.sub(t.realA).add(r).toString()).mul(10**(n-i))}static getInitParam({supply:t,totalFundRaising:n,totalSell:i,totalLockedAmount:r,migrateFee:o}){let s=t.sub(r);if(s.lte(new U(0)))throw Error("supplyMinusLocked need gt 0");let a=n.mul(new U(3)).sub(o),c=n.mul(new U(2)).mul(s).div(a),l=c.mul(c),m=n.mul(new U(2)).mul(te).div(l);if(!m.gt(new U(0)))throw Error("a need gt 0");if(!At.gt(m))throw Error("a need lt u64 max");if(m.lt(new U(0))||c.lt(new U(0)))throw Error("invalid input 0");return{a:m,b:new U(0),c}}static buyExactIn({poolInfo:t,amount:n}){let i=t.realB.add(n),r=new U(2).mul(i).mul(te).div(t.virtualA);return new U(new F(r.toString()).sqrt().toFixed(0)).sub(t.realA)}static buyExactOut({poolInfo:t,amount:n}){let i=t.realA.add(n),r=i.mul(i);return ft(t.virtualA.mul(r),new U(2).mul(te)).sub(t.realB)}static sellExactIn({poolInfo:t,amount:n}){let i=t.realA.sub(n),r=i.mul(i),o=ft(t.virtualA.mul(r),new U(2).mul(te));return t.realB.sub(o)}static sellExactOut({poolInfo:t,amount:n}){let i=t.realB.sub(n),r=new U(2).mul(i).mul(te).div(t.virtualA),o=new U(new F(r.toString()).sqrt().toFixed(0));return t.realA.sub(o)}};export{Tn as LinearPriceCurve};
//# sourceMappingURL=linearPriceCurve.mjs.map